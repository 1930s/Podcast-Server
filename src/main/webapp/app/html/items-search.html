<div class="container item-listing" ng-swipe-right="swipePage(-1)" ng-swipe-left="swipePage(1)">
    <!--<div class="col-xs-11 col-sm-11 col-lg-11 col-md-11">-->

    <div class="form-inline search-bar row" ng-show="search">
        <div class="form-group col-sm-3">
            <input type="text" class="form-control" ng-model="searchParameters.term" placeholder="Recherche globale" ng-change="currentSearchPage=1; changePage()" ng-model-options="{ debounce: 500 }">
        </div>

        <div class="form-group col-sm-5">
            <tags-input placeholder="Search by Tags" add-from-autocomplete-only="true" ng-model="searchParameters.tags" display-property="name" class="bootstrap" on-tag-added="currentPage=1; changePage()" on-tag-removed="currentPage=1; changePage()">
                <auto-complete source="loadTags($query)" min-length="2"></auto-complete>
            </tags-input>
        </div>

        <div class="form-group col-sm-2">
            <select class="form-control" ng-model="searchParameters.properties" ng-change="changePage()">
                <option value>Tri</option>
                <option value="pertinence">Pertinence</option>
                <option value="pubdate">Date publication</option>
                <option value="downloaddate">Date de download</option>
            </select>
        </div>

        <div class="form-group col-sm-2">
            <select class="form-control" ng-model="searchParameters.direction" ng-change="changePage()" ng-disabled="searchParameters.properties === 'pertinence'">
                <option value>Ordre</option>
                <option value="DESC">Descendant</option>
                <option value="ASC">Ascendant</option>
            </select>
        </div>
    </div>

    <div class="text-center row" >
        <pagination ng-show="totalPages > 1" items-per-page="12" max-size="10" boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="changePage()" class="pagination pagination-centered" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
        <a ng-click="search = !search; reinitSearch();" ng-class="{'btn-primary' : search, 'btn-default' : !search}" class="btn pull-right search-button"><i class="glyphicon glyphicon-search"></i></a>
    </div>
        <div class="row">
            <div ng-repeat="item in items track by item.id" class="col-lg-3  col-md-3 col-sm-4 col-xs-6 itemInList">
                <div class="box">
                    <div class="">
                        <img ng-class="{'img-grayscale' : (item.localUrl == null) }" ng-src="{{ item.cover.url }}" alt="" class="img-responsive" />
                        <div class="overlay-button">
                            <div class="btn-group" dropdown is-open="isopen">
                                <button type="button" class="btn dropdown-toggle"><i class="ionicons ion-android-more"></i></button>
                                <ul class="dropdown-menu dropdown-menu-right" role="menu">
                                    <li ng-show="item.status == 'Started' || item.status == 'Paused'">
                                        <a ng-show="item.status == 'Started'" ng-click="toggleDownload(item)"><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i> Mettre en pause</a>
                                        <a ng-show="item.status == 'Paused'" ng-click="toggleDownload(item)"><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i> Reprendre</a>
                                    </li>
                                    <li ng-show="item.status == 'Started' || item.status == 'Paused'">
                                        <a ng-click="stopDownload(item)"><span class="glyphicon glyphicon-stop"></span> Stopper</a>
                                    </li>
                                    <li ng-show="(item.status != 'Started' && item.status != 'Paused' ) && item.localUrl == null">
                                        <a ng-click="item.download()"><span class="glyphicon glyphicon-save"></span> Télécharger</a>
                                    </li>
                                    <li ng-show="item.localUrl == null" >
                                        <a ng-href="{{ item.proxyURL }}"><span class="glyphicon glyphicon-globe"></span> Lire en ligne</a>
                                    </li>
                                    <!--
                                    <li ng-show="item.localUrl != null">
                                        <a ng-href="{{ item.proxyURL }}"><span class="glyphicon glyphicon-play"></span></a>
                                    </li> -->
                                    <li>
                                        <a ng-click="remove(item)"><span class="glyphicon glyphicon-remove"></span> Supprimer</a>
                                    </li>
                                    <li>
                                        <a ng-click="reset(item)"><span class="glyphicon glyphicon-repeat"></span> Reset</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                        <a class="overlay-main-button" ng-href="{{ item.proxyURL  }}" >
                            <span ng-class="{'glyphicon-globe' : (item.localUrl == null), 'glyphicon-play' : (item.localUrl != null)}" class="glyphicon "></span>
                        </a>
                    </div>
                    <div class="text-center clearfix itemTitle center" >
                        <a ng-href="#/podcast/{{item.podcastId}}/item/{{item.id}}" tooltip-trigger tooltip="{{ item.title }}" tooltip-placement="bottom" >
                            {{ item.title | characters:30 }}
                        </a>
                    </div>
                    <div class="text-center row-button">
                        <span ng-show="item.status == 'Started' || item.status == 'Paused'" >
                                        <button ng-click="toggleDownload(item)" type="button" class="btn btn-primary "><i class="glyphicon glyphicon-play"></i><i class="glyphicon glyphicon-pause"></i></button>
                                        <button ng-click="stopDownload(item)" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-stop"></span></button>
                                    </span>

                        <button ng-click="item.download()" ng-show="(item.status != 'Started' && item.status != 'Paused' ) && item.localUrl == null " type="button" class="btn btn-primary"><span class="glyphicon glyphicon-save"></span></button>
                        <a href="{{ item.proxyURL }}" ng-show="item.localUrl == null" type="button" class="btn btn-info"><span class="glyphicon glyphicon-globe"></span></a>

                        <a href="{{ item.proxyURL }}" ng-show="item.localUrl != null" type="button" class="btn btn-success"><span class="glyphicon glyphicon-play"></span></a>
                        <button ng-click="remove(item)" ng-show="item.localUrl != null" type="button" class="btn btn-danger"><span class="glyphicon glyphicon-remove"></span></button>
                    </div>
                </div>
            </div>
        </div>
    <!--</div>-->
    <div class="text-center row" ng-show="totalPages > 1">
        <pagination items-per-page="12" max-size="10" boundary-links="true" total-items="totalItems" ng-model="currentPage" ng-change="changePage()" class="pagination pagination-centered" previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;"></pagination>
    </div>
</div>
