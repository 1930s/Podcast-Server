{"version":3,"sources":["podcastserver.js"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","angular","module","config","cfpLoadingBarProvider","includeSpinner","ngstompProvider","url","credential","SockJS","RestangularProvider","setBaseUrl","addElementTransformer","item","addRestangularMethod","constant","event","preventDefault","window","location","href","$routeProvider","otherwise","redirectTo","$locationProvider","html5Mode","authorizeNotificationDirective","this","replace","restrict","scope","templateUrl","controllerAs","controller","authorizeNotificationController","$window","$notification","state","hasToBeShown","$inject","value","_this","requestPermission","then","Notification","permission","directive","deviceDetectorService","service","filter","text","String","_","mixin","updateinplace","localArray","remoteArray","comparisonFunction","undefined","arguments","inArray","elem","indexOf","withOrder","forEachRight","slice","splice","forEach","push","elementToMove","navbarController","navCollapsed","navbarDirective","transclude","element","removeClass","UpdatingDirective","liParent","parent","tagName","liElement","addClass","$watch","newValue","UpdatingController","ngstomp","$scope","_this2","isUpdating","subscribe","message","updateStatus","JSON","parse","body","DownloadCtrl","DonwloadManager","_this3","items","waitingitems","numberOfSimDl","getNumberOfSimDl","parseInt","ws","onSubscribeDownload","onSubscribeWaiting","onDownloadUpdate","onWaitingUpdate","elemToUpdate","find","id","status","assign","title","icon","cover","delay","e","onStoppedFromWS","remove","remoteWaitingItems","findIndex","number","updateNumberOfSimDl","download","stop","toggle","stopAllDownload","pauseAllDownload","restartAllCurrentDownload","removeFromQueue","dontDonwload","position","moveInWaitingList","commonKey","when","hotkeys","ItemDetailCtrl","$location","playlistService","podcast","_this4","webSockedUrl","concat","itemFromWS","_this5","path","_this6","reset","itemReseted","addOrRemove","contains","resolve","itemService","$route","findById","current","params","podcastId","itemId","podcastService","run","$templateCache","put","ItemPlayerController","$timeout","autoPlay","sources","src","proxyURL","type","mimeType","plugins","controls","autoHide","isTouchedDevice","autoHideTime","poster","PlayerController","playlist","API","currentVideo","reloadPlaylist","currentState","isCompleted","play","setVideo","indexOfVideo","getIndexOfVideoInPlaylist","index","removeAll","PlaylistService","$localStorage","isObject","add","PodcastCreationController","defaultPodcast","tagService","types","extend","getNewPodcast","_this7","findInfo","podcastFetched","description","query","search","test","_this8","save","typeService","findAll","hasToBeDeleted","height","width","PodcastsListCtrl","podcasts","filters","SearchItemCache","DefaultItemSearchParameters","$sessionStorage","searchParameters","pageNumber","isNumber","page","sizeNumber","size","searchParam","term","tags","direction","properties","ItemSearchCtrl","_this9","DownloadManager","totalItems","Number","MAX_VALUE","maxSize","currentPage","getParameters","updateItemFromWS","$on","changePage","attachResponse","wsMessage","_this10","calculatePage","itemsResponse","content","totalPages","totalElements","val","_this11","_this12","itemInList","Math","ceil","updateSearchParam","reloadOnSearch","StatsController","statService","stats","month","chartSeries","transform","chartConfig","options","chart","plotOptions","spline","marker","enabled","xAxis","dateTimeLabelFormats","year","series","credits","loading","_this13","name","data","values","map","dateMapper","sortBy","highChartsMapper","offset","generateChartData","_this14","statsByType","date","Date","UTC","numberOfItems","wsDownloadManager","urlBase","WS_DOWNLOAD_BASE","connect","callback","unsubscribe","send","Restangular","baseTask","one","baseDownloadManager","customGET","customPOST","customDELETE","all","getList","get","childRoute","_this15","post","responseFromServer","restangularizedItems","pageParemeters","restangularizeCollection","itemList","_this16","restangularList","restangularizeElement","file","formData","FormData","append","withHttpConfig","transformRequest","identity","Content-Type","route","patch","numberOfMonth","base","baseAll","UpdateService","idPodcast","podcastEditionDirective","bindToController","podcastEditionCtrl","_this17","podcastToUpdate","cloneDeep","patchedPodcast","$emit","_this18","deletePodcast","podcastItemsListDirective","podcastItemsListCtrl","PodcastItemPerPage","_this19","itemPerPage","loadPage","onMessageFromWS","_this20","getItemForPodcastWithPagination","restangularizePodcastItem","_this21","reject","_this22","itemToRemove","PodcastDetailCtrl","_this23","podcastTabs","heading","active","disabled","refreshItems","$broadcast","_this24","forceUpdatePodcast","num","podcastStatsDirective","PodcastDetailsStatsCtrl","$q","_this25","_this26","resetChart","statsByByDownloaddate","statsByPubdate","arrayResult","downloadData","publicationData","podcastUploadDirective","restrcit","podcastUploadCtrl","$files","_this27","upload"],"mappings":"CAAC,WAAD,YAEA,IAAIA,GAAgB,WAAc,QAASC,GAAiBC,EAAQC,GAAS,IAAK,GAAIC,GAAI,EAAGA,EAAID,EAAME,OAAQD,IAAK,CAAE,GAAIE,GAAaH,EAAMC,EAAIE,GAAWC,WAAaD,EAAWC,aAAc,EAAOD,EAAWE,cAAe,EAAU,SAAWF,KAAYA,EAAWG,UAAW,GAAMC,OAAOC,eAAeT,EAAQI,EAAWM,IAAKN,IAAiB,MAAO,UAAUO,EAAaC,EAAYC,GAAiJ,MAA9HD,IAAYb,EAAiBY,EAAYG,UAAWF,GAAiBC,GAAad,EAAiBY,EAAaE,GAAqBF,MAE7hBI,EAAkB,SAAUC,EAAUL,GAAe,KAAMK,YAAoBL,IAAgB,KAAM,IAAIM,WAAU,qCAJvHC,SAAQC,OAAO,cACX,YACA,aACA,UACA,cACA,YACA,WACA,YACA,iBACA,YACA,eAEJD,QAAQC,OAAO,aACX,kBACA,oBACA,wBACA,oBACA,qBAEJD,QACKC,OAAO,qBAAuB,wBAC9BC,QAAAA,wBAAO,SAACC,GAA6BA,EAAsBC,gBAAiB,KACjFJ,QAAQC,OAAO,oBACX,UACA,YACA,eACA,aAEJD,QACKC,OAAO,qBAAsB,mBAC7BC,QAAAA,kBAAO,SAACG,GAjBT,MAiB6BA,GAAgBC,IAAI,OAAOC,WAAW,QAAS,YAAW,SAAOC,WAClGR,QACKC,OAAO,yBAA0B,gBACjCC,QAAAA,sBAAO,SAACO,GACLA,EAAoBC,WAAW,SAC/BD,EAAoBE,sBAAsB,SAAS,EAAO,SAACC,GAGvD,MAFAA,GAAKC,qBAAqB,QAAS,MAAO,SAC1CD,EAAKC,qBAAqB,WAAY,MAAO,cACtCD,OAGnBZ,QACKC,OAAO,mBAAoB,UAAU,gBACrCa,SAAS,cACL,IAAK,YAAa,SAACC,GAChBA,EAAMC,iBACNC,OAAOC,SAASC,KAAO,YAE1B,IAAK,cAAe,SAACJ,GAClBA,EAAMC,iBACNC,OAAOC,SAASC,KAAO,kBAE1B,IAAK,oBAAqB,SAACJ,GACxBA,EAAMC,iBACNC,OAAOC,SAASC,KAAO,eAE1B,IAAK,qBAAsB,SAACJ,GACzBA,EAAMC,iBACNC,OAAOC,SAASC,KAAO,gBAG9BjB,QAAAA,iBAAO,SAAAkB,GAzBR,MAyB0BA,GAAeC,WAAWC,WAAY,cAC/DpB,QAAAA,oBAAO,SAAAqB,GAxBR,MAwB6BA,GAAkBC,WAAU,KArB7D,IAuBMC,GACS,QADTA,KAtBF5B,EAAgB6B,KAsBdD,GAEEC,KAAKC,SAAU,EACfD,KAAKE,SAAW,IAChBF,KAAKG,OAAQ,EACbH,KAAKI,YAAc,mCACnBJ,KAAKK,aAAe,KACpBL,KAAKM,WAAa,mCAIpBC,EAA+B,WACtB,QADTA,GACUC,EAASC,GAtBjBtC,EAAgB6B,KAqBlBO,GAEEP,KAAKQ,QAAUA,EACfR,KAAKS,cAAgBA,EACrBT,KAAKU,MAAQV,KAAKW,eAFtB,MA6CIJ,GAAgCK,SAAW,UAAW,iBA7D1D1D,EAcEqD,IAbEzC,IAAK,mBACL+C,MAmBY,WAlBR,GAAIC,GAAQd,IAmBhBA,MAAKS,cACAM,oBACAC,KAAK,WAAQF,EAAKJ,MAAQI,EAAKH,oBAdpC7C,IAAK,eACL+C,MAgBQ,WACR,MAAS,gBAAkBb,MAAKQ,SAAoD,WAAxCR,KAAKQ,QAAQS,aAAaC,eAdxEX,IAkBNjC,SAAQC,OAAO,0BAA2B,iBACrC4C,UAAU,wBAAyB,WAbpC,MAa0C,IAAIpB,KAC7CO,WAAW,kCAAmCC,GAEnDjC,QAAQC,OAAO,aACX,aACA,SACA,yBACA,mBACA,YAhBJ,IAkBM6C,GAAqB,WACZ,QADTA,GACUZ,GAjBRrC,EAAgB6B,KAgBlBoB,GAEEpB,KAAKQ,QAAUA,EANnB,MAyDIY,GAAsBR,SAAW,WAhErC1D,EAWEkE,IAVEtD,IAAK,kBACL+C,MAcW,WACX,MAAO,gBAAkBb,MAAKQ,YANhCY,IAUN9C,SAAQC,OAAO,uBACV8C,QAAQ,wBAAyBD,GACtC9C,QAAQC,OAAO,iBACV+C,OAAO,kBAAmB,WACvB,MAAO,UAASC,GACZ,MAAOC,QAAOD,GAAQ,IAAItB,QAAQ,YAAa,OAQ3DwB,EAAEC,OAEEC,cAAgB,SAASC,EAAYC,GAbjC,GAa8CC,GAAkBC,SAAAC,UAAA,GAAG,SAACC,EAASC,GAZzE,MAYkFD,GAAQE,QAAQD,IAAKF,UAAA,GAAEI,EAASL,SAAAC,UAAA,IAAG,EAAKA,UAAA,EAe9H,OAZAP,GAAEY,aAAaT,EAAWU,QAAS,SAACJ,EAAMpE,GATtC,MASyF,KAA1CgE,EAAmBD,EAAaK,IAAiBN,EAAWW,OAAOzE,EAAK,KAG3H2D,EAAEe,QAAQX,EAAa,SAACK,GAPpB,MAOuE,KAA1CJ,EAAoBF,EAAYM,IAAiBN,EAAWa,KAAKP,KAE9FE,GACAX,EAAEe,QAAQX,EAAa,SAACK,EAAMpE,GAC1B,GAAI4E,GAAgBd,EAAWW,OAAOT,EAAmBF,EAAYM,GAAO,GAAG,EAC/EN,GAAWW,OAAOzE,EAAK,EAAG4E,KAI3Bd,IAFf,IAMMe,GACS,QADTA,KALFxE,EAAgB6B,KAKd2C,GAEE3C,KAAK4C,cAAe,GAItBC,EAAe,WACN,QADTA,KAJE1E,EAAgB6B,KAIlB6C,GAEE7C,KAAK8C,YAAa,EAClB9C,KAAKC,SAAU,EACfD,KAAKE,SAAW,IAChBF,KAAKG,OAAQ,EACbH,KAAKI,YAAc,mBACnBJ,KAAKM,WAAa,mBAClBN,KAAKK,aAAe,SAMxB,MAPAnD,GAPE2F,IAQE/E,IAAK,OACL+C,MAEA,SAACV,EAAO4C,GACRA,EAAQC,YAAY,cAZtBH,IAgBNvE,SAAQC,OAAO,aACV4C,UAAU,SAAU,WACrB,MAD2B,IAAI0B,KAC9BvC,WAAW,mBAAoBqC,EAGpC,IADMM,GAAiB,WACR,QADTA,KAGE9E,EAAgB6B,KAHlBiD,GAEEjD,KAAKE,SAAW,IAChBF,KAAKG,OAAQ,EACbH,KAAKI,YAAc,qBACnBJ,KAAKM,WAAa,qBAClBN,KAAKK,aAAe,KAwBxB,MAlBAnD,GAZE+F,IAaEnF,IAAK,OACL+C,MALA,SAACV,EAAO4C,GAER,GAAIG,GAAWH,EAAQI,SAASA,SAAS,EAErCD,IAAiC,OAArBA,EAASE,UAMhB,WALL,GAAIC,GAAY/E,QAAQyE,QAAQG,EAChCG,GAAUC,SAAS,UACnBnD,EAAMoD,OACF,gBACA,SAACC,GAKO,MALMA,GAAaH,EAAUL,YAAY,UAAYK,EAAUC,SAAS,mBAlB1FL,KAwBAQ,EAAkB,WACT,QADTA,GACUC,EAASC,GAUjB,GAAIC,GAAS5D,IAEb7B,GAAgB6B,KAblByD,GAEEzD,KAAK0D,QAAUA,EACf1D,KAAK6D,YAAa,EAClB7D,KAAK2D,OAASA,EAEd3D,KAAK0D,QACAI,UAAU,gBAAiB,SAACC,GAa7B,MAbyCH,GAAKI,aAAaD,IAAUJ,GACpEG,UAAU,kBAAmB,SAACC,GAc/B,MAd2CH,GAAKI,aAAaD,IAAUJ,GAyB/E,MAiCIF,GAAmB7C,SAAW,UAAW,UAxC7C1D,EA1BEuG,IA2BE3F,IAAK,eACL+C,MAjBQ,SAACkD,GACT/D,KAAK6D,WAAaI,KAAKC,MAAMH,EAAQI,UAZvCV,IAgBNnF,SAAQC,OAAO,YAAa,mBACvB4C,UAAU,eAAgB,WAoB3B,MApBiC,IAAI8B,KACpC3C,WAAW,qBAAsBmD,EAsBtC,IAnBMW,GAAY,WAEH,QAFTA,GAEUT,EAAQU,EAAiB5D,GAmBjC,GAAI6D,GAAStE,IAEb7B,GAAgB6B,KAvBlBoE,GAGEpE,KAAKqE,gBAAkBA,EACvBrE,KAAKS,cAAgBA,EACrBT,KAAKuE,SACLvE,KAAKwE,gBACLxE,KAAKyE,cAAgB,EAErBzE,KAAKqE,gBAAgBK,mBAAmB1D,KAAK,SAACH,GAC1CyD,EAAKG,cAAgBE,SAAS9D,KAIlCb,KAAKqE,gBAAgBO,GAChBd,UAAU,gBAAiB,SAACC,GAsB7B,MAtByCO,GAAKO,oBAAoBd,IAAUJ,GAC3EG,UAAU,eAAgB,SAACC,GAuB5B,MAvBwCO,GAAKQ,mBAAmBf,IAAUJ,GACzEG,UAAU,kBAAmB,SAACC,GAwB/B,MAxB2CO,GAAKS,iBAAiBhB,IAAUJ,GAC1EG,UAAU,iBAAkB,SAACC,GAyB9B,MAzB0CO,GAAKU,gBAAgBjB,IAAUJ,GAgJjF,MAlFIS,GAAaxD,SAAW,SAAU,kBAAmB,iBAjCzD1D,EA/CEkH,IAgDEtG,IAAK,sBACL+C,MA5Be,SAACkD,GAChB/D,KAAKuE,MAAQN,KAAKC,MAAMH,EAAQI,SA+BhCrG,IAAK,qBACL+C,MA9Bc,SAACkD,GACf/D,KAAKwE,aAAeP,KAAKC,MAAMH,EAAQI,SAiCvCrG,IAAK,mBACL+C,MAhCY,SAACkD,GACb,GAAI7E,GAAO+E,KAAKC,MAAMH,EAAQI,MAC1Bc,EAAexD,EAAEyD,KAAKlF,KAAKuE,OAASY,GAAMjG,EAAKiG,IACnD,QAAQjG,EAAKkG,QACT,IAAK,UACL,IAAK,SACGH,EACAxD,EAAE4D,OAAOJ,EAAc/F,GAEvBc,KAAKuE,MAAM9B,KAAKvD,EACpB,MACJ,KAAK,SACD,IACIc,KAAKS,cAAc,0BACf0D,KAAMjF,EAAKoG,MACXC,KAAMrG,EAAKsG,MAAM5G,IACjB6G,MAAO,MAEb,MAAOC,IAGT1F,KAAK2F,gBAAgBV,EACrB,MACJ,KAAK,UACDjF,KAAK2F,gBAAgBV,OAgC7BnH,IAAK,kBACL+C,MA5BW,SAACoE,GACRA,GACAxD,EAAEmE,OAAO5F,KAAKuE,MAAO,SAAUrF,GAC3B,MAAOA,GAAKiG,KAAOF,EAAaE,QAiCxCrH,IAAK,kBACL+C,MA7BW,SAACkD,GACZ,GAAI8B,GAAqB5B,KAAKC,MAAMH,EAAQI,KAC5C1C,GAAEE,cAAc3B,KAAKwE,aAAcqB,EAAoB,SAAC5D,EAASC,GA8BzD,MA9BkET,GAAEqE,UAAU7D,GAAWkD,GAAMjD,EAAKiD,OAAO,MAkCnHrH,IAAK,oBACL+C,MAhCa,SAAC3B,GACd,MAAoB,WAAhBA,EAAKkG,OACE,UACJ,UAmCPtH,IAAK,sBACL+C,MAlCe,SAACkF,GAChB/F,KAAKqE,gBAAgB2B,oBAAoBD,MAqCzCjI,IAAK,WAGL+C,MApCI,SAAC3B,GACLc,KAAKqE,gBAAgB4B,SAAS/G,MAuC9BpB,IAAK,eACL+C,MAtCQ,SAAC3B,GACTc,KAAKqE,gBAAgBO,GAAGsB,KAAKhH,MAyC7BpB,IAAK,iBACL+C,MAxCU,SAAC3B,GACXc,KAAKqE,gBAAgBO,GAAGuB,OAAOjH,MA2C/BpB,IAAK,kBAGL+C,MA1CW,WACXb,KAAKqE,gBAAgB+B,qBA6CrBtI,IAAK,mBACL+C,MA5CY,WACZb,KAAKqE,gBAAgBgC,sBA+CrBvI,IAAK,4BACL+C,MA9CqB,WACrBb,KAAKqE,gBAAgBiC,+BAiDrBxI,IAAK,kBACL+C,MAhDW,SAAC3B,GACZc,KAAKqE,gBAAgBkC,gBAAgBrH,MAmDrCpB,IAAK,eACL+C,MAlDQ,SAAC3B,GACTc,KAAKqE,gBAAgBmC,aAAatH,MAqDlCpB,IAAK,oBACL+C,MApDa,SAAC3B,EAAMuH,GACpBzG,KAAKqE,gBAAgBqC,kBAAkBxH,EAAMuH,OA1G/CrC,IA+GN9F,SAAQC,OAAO,eACX,kBACA,iCACA,iBAECC,QAAAA,iBAAAA,YAAO,SAACkB,EAAgBiH,GAkDzB,MAjDIjH,GACIkH,KAAK,aACDxG,YAAa,qBACbE,WAAY,eACZD,aAAc,KACdwG,QAASF,OAGpBrG,WAAW,eAAgB8D,EAiDhC,IAhDM0C,GAAc,WAEL,QAFTA,GAEUnD,EAAQU,EAAiB0C,EAAWC,EAAiBC,EAAS/H,GAgDtE,GAAIgI,GAASlH,IAEb7B,GAAgB6B,KApDlB8G,GAGE9G,KAAKd,KAAOA,EACZc,KAAK+G,UAAYA,EACjB/G,KAAKd,KAAK+H,QAAUA,EACpBjH,KAAKgH,gBAAkBA,EACvBhH,KAAKqE,gBAAkBA,CAGvB,IAAI8C,GAAe,kBAAkBC,OAAOpH,KAAKd,KAAK+H,QAAQ9B,GAE9DnF,MAAKqE,gBACAO,GACAd,UAAUqD,EAAc,SAACpD,GACtB,GAAIsD,GAAapD,KAAKC,MAAMH,EAAQI,KAChCkD,GAAWlC,IAAM+B,EAAKhI,KAAKiG,IAC3B1D,EAAE4D,OAAO6B,EAAKhI,KAAMmI,IAEzB1D,GA8FX,MAQImD,GAAelG,SAAW,SAAU,kBAAmB,YAAa,kBAAmB,UAAW,QAlDtG1D,EAvEE4J,IAwEEhJ,IAAK,eACL+C,MAlDQ,SAAC3B,GACTc,KAAKqE,gBAAgBO,GAAGsB,KAAKhH,MAqD7BpB,IAAK,iBACL+C,MAnDU,SAAC3B,GACXc,KAAKqE,gBAAgBO,GAAGuB,OAAOjH,MAsD/BpB,IAAK,SACL+C,MApDE,SAAC3B,GAqDC,GAAIoI,GAAStH,IApDjB,OAAOd,GAAK0G,SACP5E,KAAK,WACNsG,EAAKN,gBAAgBpB,OAAO1G,GAC5BoI,EAAKP,UAAUQ,KAAK,aAAaH,OAAOE,EAAKpI,KAAK+H,QAAQ9B,UAyD9DrH,IAAK,QACL+C,MAtDC,SAAC3B,GAuDE,GAAIsI,GAASxH,IAtDjB,OAAOd,GAAKuI,QACPzG,KAAK,SAAC0G,GACHjG,EAAE4D,OAAOmC,EAAKtI,KAAMwI,GACpBF,EAAKR,gBAAgBpB,OAAO1G,QA2DpCpB,IAAK,mBACL+C,MAxDY,WACZb,KAAKgH,gBAAgBW,YAAY3H,KAAKd,SA2DtCpB,IAAK,eACL+C,MAzDQ,WACR,MAAOb,MAAKgH,gBAAgBY,SAAS5H,KAAKd,UApD5C4H,IAwDNxI,SAAQC,OAAO,mBACX,iCACA,cACDC,QAAAA,iBAAAA,YAAO,SAASkB,EAAgBiH,GAC/BjH,EACIkH,KAAK,qCACDxG,YAAa,wBACbE,WAAY,iBACZD,aAAc,MACdwG,QAASF,EACTkB,SACI3I,MAAAA,cAAAA,SAAO,SAAU4I,EAAaC,GAC1B,MAAOD,GAAYE,SAASD,EAAOE,QAAQC,OAAOC,UAAWJ,EAAOE,QAAQC,OAAOE,UAEvFnB,SAAAA,iBAAAA,SAAU,SAAUoB,EAAgBN,GAChC,MAAOM,GAAeL,SAASD,EAAOE,QAAQC,OAAOC,mBAqHjE7H,WAhHHA,iBAAWwG,GAChBxI,QAAQC,OAAO,iBAAkB+J,KAAK,iBAAkB,SAASC,GAAiBA,EAAeC,IAAI,mCAAmC,kLACxID,EAAeC,IAAI,qBAAqB,22IACxCD,EAAeC,IAAI,wBAAwB,igIAC3CD,EAAeC,IAAI,wBAAwB,+0DAC3CD,EAAeC,IAAI,yBAAyB,82RAC5CD,EAAeC,IAAI,mBAAmB,ySACtCD,EAAeC,IAAI,mBAAmB,skFACtCD,EAAeC,IAAI,6BAA6B;AAChDD,EAAeC,IAAI,2BAA2B,4gEAC9CD,EAAeC,IAAI,oCAAoC,m7HACvDD,EAAeC,IAAI,qCAAqC,i0HACxDD,EAAeC,IAAI,kCAAkC,kmBACrDD,EAAeC,IAAI,mCAAmC,4TACtDD,EAAeC,IAAI,0BAA0B,mkDAC7CD,EAAeC,IAAI,kBAAkB,gqBACrCD,EAAeC,IAAI,qBAAqB,qIAKxClK,QAAQC,OAAO,WACX,kBACA,kBAyDJ,IAvDMkK,GAES,QAFTA,GAEUxB,EAAS/H,EAAMwJ,EAAUtH,GAsDrCjD,EAAgB6B,KAxDdyI,GAGEzI,KAAKd,KAAOA,EACZc,KAAKd,KAAK+H,QAAUA,EACpBjH,KAAK0I,SAAWA,EAEhB1I,KAAKxB,QACDmK,UAAU,EACVC,UACMC,IAAM7I,KAAKd,KAAK4J,SAAUC,KAAO/I,KAAKd,KAAK8J,WAEjDC,SACIC,UACIC,UAAW/H,EAAsBgI,kBACjCC,aAAc,KAElBC,OAAQtJ,KAAKd,KAAKsG,MAAM5G,MAuHpC6J,GAAqB7H,SAAW,UAAW,OAAQ,WAAY,yBAjHnEtC,QAAQC,OAAO,kBACX,aACA,UACA,mBACA,wBACA,uCACA,yCACA,4CACA,4CAECC,QAAAA,iBAAO,SAACkB,GACLA,EACIkH,KAAK,0CACDxG,YAAa,wBACbE,WAAY,uBACZD,aAAc,MACdwH,SACQ3I,MAAAA,cAAAA,SAAO,SAAC4I,EAAaC,GA0C7B,MA1CwCD,GAAYE,SAASD,EAAOE,QAAQC,OAAOC,UAAWJ,EAAOE,QAAQC,OAAOE,UAC5GnB,SAAAA,iBAAAA,SAAU,SAACoB,EAAgBN,GA4CnC,MA5C8CM,GAAeL,SAASD,EAAOE,QAAQC,OAAOC,mBAuHpG7H,WAnHHA,uBAAWmI,EA8ChB,IA5CMc,GAAgB,WACP,QADTA,GACUvC,EAAiB0B,EAAUtH,GA6CnCjD,EAAgB6B,KA9ClBuJ,GAEEvJ,KAAKgH,gBAAkBA,EACvBhH,KAAK0I,SAAWA,EAEhB1I,KAAKwJ,YACLxJ,KAAKU,MAAQ,KACbV,KAAKyJ,IAAM,KACXzJ,KAAK0J,gBACL1J,KAAKxB,QACDmK,UAAW,EACXC,WACAK,SACIC,UACIC,UAAY/H,EAAsBgI,kBAClCC,aAAc,KAElBC,OAAQ,KAGhBtJ,KAAK2J,iBAgHT,MAIIJ,GAAiB3I,SAAW,kBAAmB,WAAY,yBAnE/D1D,EArEEqM,IAsEEzL,IAAK,gBACL+C,MAhDS,SAAC4I,GACVzJ,KAAKyJ,IAAMA,GAEkB,QAAzBzJ,KAAKyJ,IAAIG,cAA0B5J,KAAK6J,cACxC7J,KAAKyJ,IAAIK,OAEb9J,KAAK6J,aAAc,EACnB7J,KAAK+J,SAAS,MAkDdjM,IAAK,kBACL+C,MAhDW,WACX,GAAImJ,GAAehK,KAAKiK,0BAA0BjK,KAAK0J,aAGvD,OAFA1J,MAAK6J,aAAc,EAEfG,EAAa,IAAMhK,KAAKwJ,SAASjM,YACjCyC,KAAK0J,aAAe1J,KAAKwJ,SAAS,QAItCxJ,MAAK+J,SAASC,EAAa,MAmD3BlM,IAAK,iBACL+C,MAjDU,WACVY,EAAEE,cAAc3B,KAAKwJ,SAAUxJ,KAAKgH,gBAAgBwC,WAAY,SAASvH,EAASC,GAAQ,MAAOT,GAAEqE,UAAU7D,GAAWkD,GAAMjD,EAAKiD,UAsDnIrH,IAAK,WACL+C,MAlDI,SAACqJ,GACLlK,KAAK0J,aAAe1J,KAAKwJ,SAASU,GAER,OAAtBlK,KAAK0J,cAA+C3H,SAAtB/B,KAAK0J,eACnC1J,KAAKyJ,IAAIvD,OACTlG,KAAKxB,OAAOoK,UAAYC,IAAM7I,KAAK0J,aAAaZ,SAAUC,KAAO/I,KAAK0J,aAAaV,WACnFhJ,KAAKxB,OAAOyK,QAAQK,OAAStJ,KAAK0J,aAAalE,MAAM5G,QAsDzDd,IAAK,SACL+C,MAnDE,SAAC3B,GACHc,KAAKgH,gBAAgBpB,OAAO1G,GAC5Bc,KAAK2J,iBACD3J,KAAKxB,OAAOoK,QAAQrL,OAAS,GAAKyC,KAAKxB,OAAOoK,QAAQ,GAAGC,MAAQ3J,EAAK4J,UACtE9I,KAAK+J,SAAS,MAuDlBjM,IAAK,YACL+C,MApDK,WACLb,KAAKgH,gBAAgBmD,YACrBnK,KAAK2J,oBAuDL7L,IAAK,4BACL+C,MArDqB,SAAC3B,GACtB,MAAOc,MAAKwJ,SAASrH,QAAQjD,OA3E/BqK,IA+ENjL,SAAQC,OAAO,aACX,aACA,UACA,mBACA,wBACA,uCACA,yCACA,4CACA,0CACA,uBAECC,QAAAA,iBAAO,SAACkB,GACLA,EACIkH,KAAK,WACDxG,YAAa,mBACbE,WAAY,mBACZD,aAAc,UAGzBC,WAAW,mBAAoBiJ,EA6CpC,IA5CMa,GAAe,WAEN,QAFTA,GAEUC,GA4CRlM,EAAgB6B,KA9ClBoK,GAGEpK,KAAKqK,cAAgBA,EACrBrK,KAAKqK,cAAcb,SAAWxJ,KAAKqK,cAAcb,aAkFrD,MA8CIY,GAAgBxJ,SAAW,iBAhF/B1D,EApDEkN,IAqDEtM,IAAK,WACL+C,MA/CI,WACJ,MAAOb,MAAKqK,cAAcb,YAkD1B1L,IAAK,MACL+C,MAjDD,SAAC3B,GACAc,KAAKqK,cAAcb,SAAS/G,KAAKvD,MAoDjCpB,IAAK,SACL+C,MAnDG,SAAC3B,GACJc,KAAKqK,cAAcb,SAAW/H,EAAEmE,OAAO5F,KAAKqK,cAAcb,SAAU,SAAStH,GAAQ,MAAOA,GAAKiD,KAAOjG,EAAKiG,QAwD7GrH,IAAK,WACL+C,MAvDI,SAAC3B,GACL,MAAOZ,SAAQgM,SAAS7I,EAAEyD,KAAKlF,KAAKqK,cAAcb,UAAWrE,GAAKjG,EAAKiG,SA0DvErH,IAAK,cACL+C,MAzDQ,SAAC3B,GACRc,KAAK4H,SAAS1I,GAASc,KAAK4F,OAAO1G,GAAQc,KAAKuK,IAAIrL,MA4DrDpB,IAAK,YACL+C,MA3DM,WACNb,KAAKqK,cAAcb,gBAvBrBY,IA2BN9L,SAAQC,OAAO,sBACX,cACD8C,QAAQ,kBAAmB+I,EA8D9B,IA5DMI,GAAyB,WAEhB,QAFTA,GAEUzD,EAAW0D,EAAgBC,EAAYrC,EAAgBsC,GA4D/DxM,EAAgB6B,KA9DlBwK,GAGExK,KAAKqI,eAAiBA,EACtBrI,KAAK+G,UAAYA,EACjB/G,KAAK0K,WAAaA,EAClB1K,KAAKiH,QAAU3I,QAAQsM,OAAO5K,KAAKqI,eAAewC,gBAAiBJ,GACnEzK,KAAK2K,MAAQA,EAmHjB,MAgCIH,GAA0B5J,SAAW,YAAa,iBAAkB,aAAc,iBAAkB,SAnFxG1D,EAvEEsN,IAwEE1M,IAAK,WACL+C,MA/DI,WAgEA,GAAIiK,GAAS9K,IA/DjB,OAAOA,MAAKqI,eAAe0C,SAAS/K,KAAKiH,QAAQrI,KAC5CoC,KAAK,SAACgK,GACHF,EAAK7D,QAAQ3B,MAAQ0F,EAAe1F,MACpCwF,EAAK7D,QAAQgE,YAAcD,EAAeC,YAC1CH,EAAK7D,QAAQ8B,KAAOiC,EAAejC,KACnC+B,EAAK7D,QAAQzB,MAAM5G,IAAMoM,EAAexF,MAAM5G,SAoEtDd,IAAK,WACL+C,MAjEI,SAACqK,GACL,MAAOlL,MAAK0K,WAAWS,OAAOD,MAoE9BpN,IAAK,aACL+C,MAlEM,WAEFb,KAAKiH,QAAQ8B,KADb,kBAAkBqC,KAAKpL,KAAKiH,QAAQrI,KAChB,aACb,iBAAiBwM,KAAKpL,KAAKiH,QAAQrI,KACtB,YACb,iBAAiBwM,KAAKpL,KAAKiH,QAAQrI,KACtB,cACb,kBAAkBwM,KAAKpL,KAAKiH,QAAQrI,KACvB,eACb,gBAAgBwM,KAAKpL,KAAKiH,QAAQrI,KACrB,UACb,uBAAuBwM,KAAKpL,KAAKiH,QAAQrI,KAC5B,QACb,gBAAgBwM,KAAKpL,KAAKiH,QAAQrI,KACrB,UACboB,KAAKiH,QAAQrI,IAAIrB,OAAS,EACb,MAEA,UAsExBO,IAAK,OACL+C,MAnEA,WAoEI,GAAIwK,GAASrL,IAnEjBA,MAAKqI,eAAeiD,KAAKtL,KAAKiH,SACzBjG,KAAK,SAACiG,GAqEH,MArEeoE,GAAKtE,UAAUQ,KAAK,aAAeN,EAAQ9B,UAhDpEqF,IAqDNlM,SAAQC,OAAO,uBACX,kBACA,iBACA,gBAECC,QAAAA,iBAAAA,YAAO,SAASkB,EAAgBiH,GAC7BjH,EACIkH,KAAK,qBACDxG,YAAa,6BACbE,WAAY,iBACZD,aAAc,MACdwG,QAASF,EACTkB,SACI8C,OAAAA,cAAQ,SAAAY,GAmEZ,MAnE2BA,GAAYC,kBAgK/CpM,SA5JHA,kBAA6BqM,gBAAiB,EAAMjG,OAAUkG,OAAQ,IAAKC,MAAO,OAClFrL,WAAW,iBAAkBkK,EAoElC,IAnEMoB,GACS,QADTA,GACUC,EAAUlB,GAmEtBxM,EAAgB6B,KApEd4L,GAEE5L,KAAK6L,SAAWA,EAChB7L,KAAK2K,MAAQA,EACb3K,KAAK8L,SACDxG,MAAQ,GACRyD,KAAO,IAoKf6C,GAAiBhL,SAAW,WAAY,SA/J5CtC,QAAQC,OAAO,mBACX,kBACA,yBACA,wBAECC,QAAAA,iBAAAA,YAAO,SAACkB,EAAgBiH,GACrBjH,EACIkH,KAAK,aACDxG,YAAa,0BACbE,WAAY,mBACZD,aAAc,MACdwG,QAASF,EACTkB,SACIgE,UAAAA,iBAAU,SAACxD,GA8Df,MA9DkCA,GAAemD,YAC7Cb,OAAAA,cAAO,SAAAY,GAgEX,MAhE0BA,GAAYC,kBAqK9ClL,WAjKHA,mBAAWsL,GAKhBtN,QAAQC,OAAO,cACX,qBACA,sBACA,mBA+DJ,IA7DMwN,GAAe,WACN,QADTA,GACUC,EAA6BC,GA8DrC9N,EAAgB6B,KA/DlB+L,GAEE/L,KAAKiM,gBAAkBA,EACvBjM,KAAKiM,gBAAgBC,iBAAmBF,EAmG5C,MAgEID,GAAgBnL,SAAW,8BAA+B,mBAjG9D1D,EArEE6O,IAsEEjO,IAAK,gBACL+C,MAjES,WACT,MAAOb,MAAKiM,gBAAgBC,oBAoE5BpO,IAAK,OACL+C,MAlEA,SAACsL,GAKD,MAJI7N,SAAQ8N,SAASD,KACjBnM,KAAKiM,gBAAgBC,iBAAiBG,KAAOF,GAG1CnM,KAAKiM,gBAAgBC,iBAAiBG,QAqE7CvO,IAAK,OACL+C,MAnEA,SAACyL,GAKD,MAJIhO,SAAQ8N,SAASE,KACjBtM,KAAKiM,gBAAgBC,iBAAiBK,KAAOD,GAG1CtM,KAAKiM,gBAAgBC,iBAAiBK,QAsE7CzO,IAAK,oBACL+C,MApEa,SAAC2L,GACdxM,KAAKiM,gBAAgBC,iBAAiBO,KAAOD,EAAYC,KACzDzM,KAAKiM,gBAAgBC,iBAAiBQ,KAAOF,EAAYE,KACzD1M,KAAKiM,gBAAgBC,iBAAiBS,UAAaH,EAAYG,UAC/D3M,KAAKiM,gBAAgBC,iBAAiBU,WAAcJ,EAAYI,eA9BlEb,KAkCAc,EAAc,WAEL,QAFTA,GAEUlJ,EAAQoI,EAAiBhF,EAAWe,EAAa4C,EAAYrG,EAAiB2C,EAAiBzC,GAuEvG,GAAIuI,GAAS9M,IAEb7B,GAAgB6B,KA3ElB6M,GAIE7M,KAAK+G,UAAYA,EACjB/G,KAAK8H,YAAcA,EACnB9H,KAAK0K,WAAaA,EAClB1K,KAAK+M,gBAAkB1I,EACvBrE,KAAKgH,gBAAkBA,EACvBhH,KAAK+L,gBAAkBA,EAGvB/L,KAAKgN,WAAaC,OAAOC,UACzBlN,KAAKmN,QAAU,GACfnN,KAAKoN,YAAcpN,KAAK+L,gBAAgBM,OAAO,EAC/CrM,KAAKkM,iBAAmBlM,KAAK+L,gBAAgBsB,gBAG7CrN,KAAK+M,gBACAnI,GACAd,UAAU,kBAAmB,SAACC,GAyE/B,MAzE2C+I,GAAKQ,iBAAiBvJ,IAAUJ,GAE/EA,EAAO4J,IAAI,eAAgB,WACnBT,EAAKM,cAAgBN,EAAK/F,UAAUoE,SAASkB,OAC7CS,EAAKM,YAAcN,EAAK/F,UAAUoE,SAASkB,MAAQ,EACnDS,EAAKU,gBAKbxN,KAAKyN,eAAelJ,GAuLxB,MAdIsI,GAAejM,SAAW,SAAU,kBAAmB,YAAa,cAAe,aAAc,kBAAmB,kBAAmB,SA5F3I1D,EA3GE2P,IA4GE/O,IAAK,mBACL+C,MA5EY,SAAC6M,GACb,GAAIxO,GAAO+E,KAAKC,MAAMwJ,EAAUvJ,MAE5Bc,EAAexD,EAAEyD,KAAKlF,KAAKuE,OAASY,GAAMjG,EAAKiG,IAC/CF,IACAxD,EAAE4D,OAAOJ,EAAc/F,MA8E3BpB,IAAK,aACL+C,MA5EM,WA6EF,GAAI8M,GAAU3N,IA3ElB,OADAA,MAAK+L,gBAAgBM,KAAKrM,KAAK4N,iBACxB5N,KAAK8H,YACPqD,OAAOnL,KAAK+L,gBAAgBsB,iBAC5BrM,KAAK,SAAC6M,GA6EH,MA7EqBF,GAAKF,eAAeI,QAiFjD/P,IAAK,iBACL+C,MA/EU,SAACgN,GACX7N,KAAKuE,MAAQsJ,EAAcC,QAC3B9N,KAAK+N,WAAaF,EAAcE,WAChC/N,KAAKgN,WAAaa,EAAcG,cAChChO,KAAKoN,YAAcpN,KAAK+L,gBAAgBM,KAAKwB,EAAc9H,QAAQ,EACnE/F,KAAK+G,UAAUoE,OAAO,OAAQnL,KAAKoN,gBAkFnCtP,IAAK,YACL+C,MAhFK,SAACoN,GAEN,MADAjO,MAAKoN,YAAcpN,KAAK+L,gBAAgBM,OAAS4B,EAAM,EAChDjO,KAAKwN,gBAmFZ1P,IAAK,SAGL+C,MAlFE,SAAC3B,GAmFC,GAAIgP,GAAUlO,IAlFlB,OAAOd,GAAK0G,SACP5E,KAAK,WAoFF,MApFQkN,GAAKlH,gBAAgBpB,OAAO1G,KACvC8B,KAAK,WAqFF,MArFQkN,GAAKV,kBAyFrB1P,IAAK,QACL+C,MAvFC,SAAC3B,GAwFE,GAAIiP,GAAUnO,IAvFlB,OAAOd,GAAKuI,QACPzG,KAAK,SAAC0G,GACH,GAAI0G,GAAa3M,EAAEyD,KAAKiJ,EAAK5J,OAASY,GAAMuC,EAAYvC,IAExD,OADA1D,GAAE4D,OAAO+I,EAAY1G,GACd0G,IAEVpN,KAAK,SAACoN,GAwFH,MAxFkBD,GAAKnH,gBAAgBpB,OAAOwI,QA4FtDtQ,IAAK,eACL+C,MA1FQ,SAAC3B,GACTc,KAAK+M,gBAAgBnI,GAAGsB,KAAKhH,MA6F7BpB,IAAK,iBACL+C,MA3FU,SAAC3B,GACX,MAAOc,MAAK+M,gBAAgBnI,GAAGuB,OAAOjH,MA8FtCpB,IAAK,WACL+C,MA5FI,SAACqK,GACL,MAAOlL,MAAK0K,WAAWS,OAAOD,MA+F9BpN,IAAK,cAGL+C,MA9FO,SAAC3B,GACR,MAAOc,MAAKgH,gBAAgBW,YAAYzI,MAiGxCpB,IAAK,eACL+C,MA/FQ,SAAC3B,GACT,MAAOc,MAAKgH,gBAAgBY,SAAS1I,MAkGrCpB,IAAK,gBACL+C,MAhGS,WACT,MAAIb,MAAKoN,aAAe,EACb,EACApN,KAAKoN,YAAciB,KAAKC,KAAKtO,KAAKgN,WAAahN,KAAK+L,gBAAgBQ,QACpE8B,KAAKC,KAAKtO,KAAKgN,WAAahN,KAAK+L,gBAAgBQ,QAAU,EAE3DvM,KAAKoN,YAAc,KAoG9BtP,IAAK,cACL+C,MAjGO,WAGP,MAFAb,MAAKoN,YAAc,EACnBpN,KAAK+L,gBAAgBwC,kBAAkBvO,KAAKkM,kBACrClM,KAAKwN,iBAhHdX,IAoHNvO,SAAQC,OAAO,kBACX,iCACA,sBACA,qBACA,YACA,kBACA,cACA,cAECC,QAAAA,iBAAAA,YAAO,SAACkB,EAAgBiH,GACrBjH,EACIkH,KAAK,UACDxG,YAAa,yBACbE,WAAY,kBACZD,aAAc,MACdmO,gBAAgB,EAChB3H,UACK,QAAS,YAAa,qBACtB,OAAQ,gBAAiB,sBAC5BO,OAAOT,GACTkB,SAAYtD,OAAAA,cAAAA,kBAAQ,SAACuD,EAAaiE,GAwFlC,MAxFsDjE,GAAYqD,OAAOY,EAAgBsB,yBAoNjGjO,SAjNHA,+BACGiN,KAAO,EACPE,KAAO,GACPE,KAAO1K,OACP2K,KAAO3K,OACP4K,UAAY,OACZC,WAAa,YAEhBtM,WAAW,kBAAmBuM,GAC9BxL,QAAQ,kBAAmB0K,GAChCzN,QAAQC,OAAO,aACX,kBAuFJ,IAnFMkQ,GAAe,WAEN,QAFTA,GAEUC,EAAaC,GAmFrBxQ,EAAgB6B,KArFlByO,GAGEzO,KAAK0O,YAAcA,EACnB1O,KAAK4O,MAAQ,EAEb5O,KAAK6O,eACL7O,KAAK8O,UAAUH,GAEf3O,KAAK+O,aACDC,SACIC,OACIlG,KAAM,UAEVmG,aACIC,QACIC,QACIC,SAAS,KAIrBC,OACIvG,KAAM,WACNwG,sBACIX,MAAO,SACPY,KAAM,MAEVlK,OACI/D,KAAM,UAIlBkO,OAAQzP,KAAK6O,YACbvJ,OACI/D,KAAO,IAEXmO,SACIL,SAAS,GAEbM,SAAS,GAsIjB,MAyDIlB,GAAgB7N,SAAW,cAAe,SAvG9C1D,EA/HEuR,IAgIE3Q,IAAK,YACL+C,MAtFK,SAAC8N,GAuFF,GAAIiB,GAAU5P,IAtFlByB,GAAEE,cAAc3B,KAAK6O,gBAErBvQ,QAAQkE,QAAQmM,EAAO,SAAC9N,GACpB,GAAIkC,IAAY8M,KAAOhP,EAAMkI,KAC7BhG,GAAQ+M,KAAOrO,EAAEZ,EAAMkP,QAClBC,IAAIvB,EAAgBwB,cACpBC,OAAO,QACPF,IAAIvB,EAAgB0B,oBACpBtP,QACL+O,EAAKf,YAAYpM,KAAKM,QAwF1BjF,IAAK,WACL+C,MA7EI,SAACuP,GACLpQ,KAAK4O,OAASwB,EACdpQ,KAAKqQ,uBAgFLvS,IAAK,oBACL+C,MA9Ea,WA+ET,GAAIyP,GAAUtQ,IA5ElB,OAAOA,MAAK0O,YACP6B,YAAYvQ,KAAK4O,OACjB5N,KAAK,SAAAuP,GA+EF,MA/EiBD,GAAKxB,UAAUyB,UAmFxCzS,IAAK,aACL+C,MAtGa,WACb,MAAO,UAACA,GAAY,OAAS2P,KAAOC,KAAKC,IAAI7P,EAAM2P,KAAK,GAAI3P,EAAM2P,KAAK,GAAG,EAAG3P,EAAM2P,KAAK,IAAKG,cAAgB9P,EAAM8P,mBA2GnH7S,IAAK,mBACL+C,MAzGmB,WACnB,MAAO,UAACA,GA0GA,OA1GWA,EAAM2P,KAAM3P,EAAM8P,oBA9DvClC,IA+ENnQ,SAAQC,OAAO,YACX,wBAECC,QAAAA,iBAAAA,YAAO,SAASkB,EAAgBiH,GAC7BjH,EACIkH,KAAK,UACDxG,YAAa,kBACbE,WAAY,kBACZD,aAAc,KACdwG,QAASF,EACTkB,SACI8G,OAAAA,cAAQ,SAAAD,GA8FZ,MA9F2BA,GAAY6B,sBAiN/CjQ,WA7MHA,kBAAWmO,GAKhBnQ,QAAQC,OAAO,kBACX,iCACA,sBACA,yBACA,qBACA,sBACA,gCA0FJ,IAvFMqS,GAAiB,WAGR,QAHTA,GAGUC,EAASnN,GAyFjBvF,EAAgB6B,KA5FlB4Q,GAIE5Q,KAAK8Q,iBAAmBD,EACxB7Q,KAAK0D,QAAUA,EAkInB,MArCAxG,GAlGE0T,IAmGE9S,IAAK,UACL+C,MA5FG,WAAK,MAAOb,MAAK0D,QAAQqN,aAgG5BjT,IAAK,YACL+C,MAhGK,SAACjC,EAAKoS,EAAU7Q,GAAQ,MAAOH,MAAK0D,QAAQI,UAAUlF,EAAKoS,EAAU7Q,MAoG1ErC,IAAK,cACL+C,MApGO,SAACjC,GAAO,MAAOoB,MAAK0D,QAAQuN,YAAYrS,MAwG/Cd,IAAK,SACL+C,MAxGE,SAAC3B,GAAQ,MAAOc,MAAK0D,QAAQwN,KAAKlR,KAAK8Q,iBAAmB,UAAW5R,MA4GvEpB,IAAK,QACL+C,MA5GC,SAAC3B,GAAQ,MAAOc,MAAK0D,QAAQwN,KAAKlR,KAAK8Q,iBAAmB,SAAU5R,MAgHrEpB,IAAK,QACL+C,MAhHC,SAAC3B,GAAQ,MAAOc,MAAK0D,QAAQwN,KAAKlR,KAAK8Q,iBAAmB,SAAU5R,MAoHrEpB,IAAK,OACL+C,MApHA,SAAC3B,GAAQ,MAAOc,MAAK0D,QAAQwN,KAAKlR,KAAK8Q,iBAAmB,QAAS5R,OAdrE0R,KAiBA7D,EAAe,WAEN,QAFTA,GAEUoE,EAAazN,GAyHrBvF,EAAgB6B,KA3HlB+M,GAGE/M,KAAKmR,YAAcA,EACnBnR,KAAKoR,SAAWpR,KAAKmR,YAAYE,IAAI,QACrCrR,KAAKsR,oBAAsBtR,KAAKoR,SAASC,IAAI,mBAC7CrR,KAAK8Q,iBAAmB,gBAExB9Q,KAAK4E,GAAK,GAAIgM,GAAkB5Q,KAAK8Q,iBAAkBpN,GA2L3D,MAqDIqJ,GAAgBnM,SAAW,cAAe,WAnH9C1D,EArIE6P,IAsIEjP,IAAK,WACL+C,MA5HI,SAAC3B,GACL,MAAOc,MAAKmR,YAAYE,IAAI,QAAQE,UAAUrS,EAAKiG,GAAK,kBA+HxDrH,IAAK,eACL+C,MA9HS,SAAC3B,GACV,MAAOc,MAAKsR,oBAAoBE,WAAWtS,EAAKiG,GAAI,mBAiIpDrH,IAAK,iBACL+C,MAhIW,SAAC3B,GACZ,MAAOc,MAAKsR,oBAAoBE,WAAWtS,EAAKiG,GAAI,qBAmIpDrH,IAAK,kBACL+C,MAlIY,WACZ,MAAOb,MAAKsR,oBAAoBC,UAAU,sBAqI1CzT,IAAK,mBACL+C,MApIa,WACb,MAAOb,MAAKsR,oBAAoBC,UAAU,uBAuI1CzT,IAAK,4BACL+C,MAtIsB,WACtB,MAAOb,MAAKsR,oBAAoBC,UAAU,gCAyI1CzT,IAAK,kBACL+C,MAxIY,SAAC3B,GACb,MAAOc,MAAKsR,oBAAoBG,aAAa,SAAWvS,EAAKiG,OA2I7DrH,IAAK,sBACL+C,MA1IgB,SAACkF,GACjB,MAAO/F,MAAKsR,oBAAoBE,WAAWzL,EAAQ,YA6InDjI,IAAK,eACL+C,MA5IS,SAAC3B,GACV,MAAOc,MAAKsR,oBAAoBG,aAAa,SAAWvS,EAAKiG,GAAK,eA+IlErH,IAAK,iBACL+C,MA9IW,WACX,MAAOb,MAAKoR,SAASM,IAAI,+BAA+BC,aAiJxD7T,IAAK,mBACL+C,MAhJa,WACb,MAAOb,MAAKsR,oBAAoBD,IAAI,SAASO,SAmJ7C9T,IAAK,oBACL+C,MAlJe,SAAC3B,EAAMuH,GACtBzG,KAAKsR,oBAAoBE,YAAYrM,GAAKjG,EAAKiG,GAAIsB,SAAWA,GAAa,YA7C7EsG,IAkDNzO,SAAQC,OAAO,kCAAoC,cAAe,mBAAoB8C,QAAQ,kBAAmB0L,EAyJjH,IApJMjF,GAAW,WACF,QADTA,GACUqJ,GAqJRhT,EAAgB6B,KAtJlB8H,GAEE9H,KAAKmR,YAAcA,EACnBnR,KAAK6R,WAAa,QAyMtB,MAkFI/J,GAAYlH,SAAW,eAlI3B1D,EA5JE4K,IA6JEhK,IAAK,SACL+C,MAxJE,WAyJE,GAAIiR,GAAU9R,KAzJfkM,EAAgBnK,SAAAC,UAAA,IAAKqK,KAAO,EAAGE,KAAO,IAAGvK,UAAA,EAC5C,OAAOhC,MAAKmR,YAAYE,IAAI,eACvBU,KAAK,KAAM7F,GACXlL,KAAK,SAACgR,GAEH,MADAA,GAAmBlE,QAAUgE,EAAKG,qBAAqBD,EAAmBlE,SACnEkE,OA8JflU,IAAK,WACL+C,MA3JI,SAACsH,EAAWC,GAChB,MAAOpI,MAAKmR,YAAYE,IAAI,UAAWlJ,GAAWkJ,IAAIrR,KAAK6R,WAAYzJ,GAAQwJ,SA8J/E9T,IAAK,kCACL+C,MA5J2B,SAACoG,EAASiL,GACrC,MAAOjL,GAAQoK,IAAI,SAASU,KAAK,KAAMG,MA+JvCpU,IAAK,4BACL+C,MA7JsB,SAACoG,EAAS1C,GAChC,MAAOvE,MAAKmR,YAAYgB,yBAAyBlL,EAAS1C,EAAOvE,KAAK6R,eAgKtE/T,IAAK,uBACL+C,MA9JgB,SAACuR,GA+Jb,GAAIC,GAAUrS,KA9JdsS,IAKJ,OAHAhU,SAAQkE,QAAQ4P,EAAU,SAACvR,GACvByR,EAAgB7P,KAAK4P,EAAKlB,YAAYoB,sBAAsBF,EAAKlB,YAAYE,IAAI,UAAWxQ,EAAMsH,WAAYtH,EAAOwR,EAAKR,eAEvHS,KAmKPxU,IAAK,SACL+C,MAjKE,SAACoG,EAASuL,GACZ,GAAIC,GAAW,GAAIC,SAEnB,OADAD,GAASE,OAAO,OAAQH,GACjBvL,EAAQyK,IAAI1R,KAAK6R,YACnBe,gBAAgBC,iBAAkBvU,QAAQwU,WAC1CtB,WAAWiB,EAAU,SAAU1Q,QAAYgR,eAAgBhR,aAzClE+F,IA6CNxJ,SAAQC,OAAO,uBAAwB,gBAAgB8C,QAAQ,cAAeyG,EAwK9E,IAlKMO,GAAc,WAEL,QAFTA,GAEU8I,GAkKRhT,EAAgB6B,KApKlBqI,GAGErI,KAAKmR,YAAcA,EACnBnR,KAAKgT,MAAQ,UAyNjB,MAgFI3K,GAAezH,SAAW,eAnI9B1D,EA1KEmL,IA2KEvK,IAAK,WACL+C,MArKI,SAACsH,GACL,MAAOnI,MAAKmR,YAAYE,IAAIrR,KAAKgT,MAAO7K,GAAWyJ,SAwKnD9T,IAAK,UACL+C,MAtKG,WACH,MAAOb,MAAKmR,YAAYO,IAAI1R,KAAKgT,OAAOrB,aAyKxC7T,IAAK,OACL+C,MAvKA,SAACoG,GACD,MAAOA,GAAQqE,UA0KfxN,IAAK,gBACL+C,MAxKS,WACT,MAAOb,MAAKmR,YAAYE,IAAIrR,KAAKgT,UA2KjClV,IAAK,QACL+C,MAzKC,SAAC3B,GACF,MAAOA,GAAK+T,WA4KZnV,IAAK,gBACL+C,MA1KS,SAAC3B,GACV,MAAOA,GAAK0G,YA6KZ9H,IAAK,WACL+C,MA3KI,SAACjC,GACL,MAAOoB,MAAKmR,YAAYE,IAAIrR,KAAKgT,OAAOjI,SAASnM,MA8KjDd,IAAK,iBACL+C,MA5KU,SAACsE,GA6KP,GA7KW+N,GAAanR,SAAAC,UAAA,GAAG,EAACA,UAAA,EAChC,OAAOhC,MAAKmR,YAAYE,IAAIrR,KAAKgT,MAAO7N,GAAIkM,IAAI,SAASK,IAAI,aAAaK,KAAKmB,MAiL/EpV,IAAK,wBACL+C,MA/KiB,SAACsE,GAgLd,GAhLkB+N,GAAanR,SAAAC,UAAA,GAAG,EAACA,UAAA,EACvC,OAAOhC,MAAKmR,YAAYE,IAAIrR,KAAKgT,MAAO7N,GAAIkM,IAAI,SAASK,IAAI,kBAAkBK,KAAKmB,OAxCtF7K,IA6CN/J,SAAQC,OAAO,0BAA2B,gBACrCC,QAAAA,sBAAO,SAACO,GACDA,EAAoBE,sBAAsB,WAAW,EAAO,SAACgI,GAEzD,MADAA,GAAQ9H,qBAAqB,WAAY,OAAQ,QAAS4C,QAAYgR,eAAgB,eAC/E9L,OAGlB5F,QAAQ,iBAAkBgH,EAsL/B,IAjLMqG,GAAW,WAEF,QAFTA,GAEUyC,GAiLRhT,EAAgB6B,KAnLlB0O,GAGE1O,KAAKmR,YAAcA,EACnBnR,KAAKmT,KAAOnT,KAAKmR,YAAYE,IAAI,SA8LrC,MA8HI3C,GAAY9N,SAAW,eAvI3B1D,EAzLEwR,IA0LE5Q,IAAK,cACL+C,MApLO,WAqLH,GArLIqS,GAAanR,SAAAC,UAAA,GAAG,EAACA,UAAA,EACzB,OAAOhC,MAAKmT,KAAKzB,IAAI,UAAUK,KAAKmB,OARtCxE,IAYNpQ,SAAQC,OAAO,uBAAwB,gBAAgB8C,QAAQ,cAAeqN,EA+L9E,IAzLMhE,GAAU,WAED,QAFTA,GAEUyG,GAyLRhT,EAAgB6B,KA3LlB0K,GAGE1K,KAAKoT,QAAUjC,EAAYO,IAAI,OAyMnC,MAqHIhH,GAAW9J,SAAW,eAjI1B1D,EAhMEwN,IAiME5M,IAAK,SACL+C,MA5LE,WACF,MAAOb,MAAKoT,QAAQxB,SA+LpB9T,IAAK,SACL+C,MA7LE,SAACqK,GACH,MAAOlL,MAAKoT,QAAQrB,KAAK,MAAOlC,KAAO3E,QAXzCR,IAgBNpM,SAAQC,OAAO,sBAAuB,gBACjC8C,QAAQ,aAAcqJ,EAmM3B,IA9LMa,GAAW,WAEF,QAFTA,GAEU4F,GA8LRhT,EAAgB6B,KAhMlBuL,GAGEvL,KAAKoT,QAAUjC,EAAYO,IAAI,SAyMnC,MAyHInG,GAAY3K,SAAW,eAhI3B1D,EArMEqO,IAsMEzN,IAAK,UACL+C,MAjMG,WACH,MAAOb,MAAKoT,QAAQzB,cAPtBpG,IAWNjN,SAAQC,OAAO,uBAAwB,gBAClC8C,QAAQ,cAAekK,EAqM5B,IAnMM8H,GAAa,WACJ,QADTA,GACUlC,GAoMRhT,EAAgB6B,KArMlBqT,GAEErT,KAAKmR,YAAcA,EA+MvB,MAqHIkC,GAAczS,SAAW,eA5H7B1D,EA1MEmW,IA2MEvV,IAAK,qBACL+C,MAvMc,SAACyS,GACf,MAAOtT,MAAKmR,YAAYE,IAAI,QAAQG,WAAW8B,EAAW,yCAN5DD,IAUN/U,SAAQC,OAAO,gCAAiC,gBAAgB8C,QAAQ,gBAAiBgS,EA4MzF,IA1MME,GACS,QADTA,KA2MFpV,EAAgB6B,KA3MduT,GAEEvT,KAAKE,SAAW,IAChBF,KAAKI,YAAc,oCACnBJ,KAAKG,OAAU8G,QAAU,KACzBjH,KAAKM,WAAa,qBAClBN,KAAKK,aAAe,MACpBL,KAAKwT,kBAAmB,GAI1BC,EAAkB,WACT,QADTA,GACU9P,EAAQoD,EAAW2D,EAAYrC,GA2MvClK,EAAgB6B,KA5MlByT,GAEEzT,KAAK2D,OAASA,EACd3D,KAAK+G,UAAYA,EACjB/G,KAAK0K,WAAaA,EAClB1K,KAAKqI,eAAiBA,EA6O1B,MAwFIoL,GAAmB7S,SAAW,SAAU,YAAa,aAAc,kBAtHvE1D,EApNEuW,IAqNE3V,IAAK,WACL+C,MA9MI,SAACqK,GACL,MAAOlL,MAAK0K,WAAWS,OAAOD,MAiN9BpN,IAAK,OACL+C,MA/MA;AAgNI,GAAI6S,GAAU1T,KA/Md2T,EAAkBlS,EAAEmS,UAAU5T,KAAKiH,QAGvC,OAFA0M,GAAgBpP,MAAQ,KAEjBvE,KAAKqI,eACP4K,MAAMU,GACN3S,KAAK,SAAC6S,GAgNH,MAhNsBpS,GAAE4D,OAAOqO,EAAKzM,QAAS4M,KAChD7S,KAAK,WAiNF,MAjNQ0S,GAAK/P,OAAOmQ,MAAM,4BAqNlChW,IAAK,gBACL+C,MAnNS,WAoNL,GAAIkT,GAAU/T,IAnNlB,OAAOA,MAAKqI,eACP2L,cAAchU,KAAKiH,SACnBjG,KAAK,WAoNF,MApNQ+S,GAAKhN,UAAUQ,KAAK,mBAzBtCkM,IA6BNnV,SAAQC,OAAO,8BACX,yBACA,qBACA,gBAEC4C,UAAU,iBAAkB,WAoN7B,MApNmC,IAAIoS,KACtCjT,WAAW,qBAAsBmT,EAsNtC,IApNMQ,GACS,QADTA,KAqNF9V,EAAgB6B,KArNdiU,GAEEjU,KAAKE,SAAU,IACfF,KAAKI,YAAc,qCACnBJ,KAAKG,OAAU8G,QAAU,KACzBjH,KAAKM,WAAa,uBAClBN,KAAKK,aAAe,MACpBL,KAAKwT,kBAAmB,GAI1BU,EAAoB,WAEX,QAFTA,GAEUvQ,EAAQU,EAAiB8P,EAAoBrM,EAAad,GAoNlE,GAAIoN,GAAUpU,IAEd7B,GAAgB6B,KAxNlBkU,GAIElU,KAAK2D,OAASA,EACd3D,KAAK+M,gBAAkB1I,EACvBrE,KAAK8H,YAAcA,EACnB9H,KAAKgH,gBAAkBA,EAEvBhH,KAAKoN,YAAc,EACnBpN,KAAKqU,YAAcF,EACnBnU,KAAKsU,WAELtU,KAAK2D,OAAO4J,IAAI,uBAAwB,WACpC6G,EAAKhH,YAAc,EACnBgH,EAAKE,aAGTtU,KAAK+M,gBACAnI,GACAd,UAAW,kBAAkBsD,OAAOpH,KAAKiH,QAAQ9B,IACtC,SAACpB,GAqNb,MArNyBqQ,GAAKG,gBAAgBxQ,IAClCJ,GAkSpB,MAuCIuQ,GAAqBtT,SAAW,SAAU,kBAAmB,qBAAsB,cAAe,mBAjHtG1D,EA9OEgX,IA+OEpW,IAAK,kBACL+C,MAvNW,SAACkD,GACZ,GAAI7E,GAAO+E,KAAKC,MAAMH,EAAQI,MAC1Bc,EAAexD,EAAEyD,KAAKlF,KAAKiH,QAAQ1C,OAASY,GAAMjG,EAAKiG,IAC3D1D,GAAE4D,OAAOJ,EAAc/F,MA0NvBpB,IAAK,WACL+C,MAxNI,WAyNA,GAAI2T,GAAUxU,IAvNlB,OADAA,MAAKoN,YAAcpN,KAAMoN,YAAc,EAAK,EAAKpN,KAAKoN,YAAciB,KAAKC,KAAKtO,KAAKgN,WAAahN,KAAKqU,aAAgBhG,KAAKC,KAAKtO,KAAKgN,WAAahN,KAAKqU,aAAerU,KAAKoN,YACnKpN,KAAK8H,YACP2M,gCAAgCzU,KAAKiH,SAAUsF,KAAMvM,KAAKqU,YAAahI,KAAOrM,KAAKoN,YAAc,EAAGT,UAAY,OAAQC,WAAa,YACrI5L,KAAK,SAAC6M,GACH2G,EAAKvN,QAAQ1C,MAAQiQ,EAAK1M,YAAY4M,0BAA0BF,EAAKvN,QAAS4G,EAAcC,SAC5F0G,EAAKvN,QAAQ+F,WAAaa,EAAcG,mBA4NhDlQ,IAAK,SACL+C,MAzNE,SAAC3B,GA0NC,GAAIyV,GAAU3U,IAzNlBd,GAAK0G,SACA5E,KAAK,WA2NF,MA3NQ2T,GAAK1N,QAAQ1C,MAAQ9C,EAAEmT,OAAOD,EAAK1N,QAAQ1C,MAAO,SAACrC,GAAU,MAAQA,GAAKiD,KAAOjG,EAAKiG,OACjGnE,KAAK,WA8NF,MA9NQ2T,GAAK3N,gBAAgBpB,OAAO1G,KACvC8B,KAAK,WA+NF,MA/NQ2T,GAAKL,gBAmOrBxW,IAAK,QACL+C,MAhOC,SAAC3B,GAiOE,GAAI2V,GAAU7U,IAhOlB,OAAOd,GAAKuI,QACPzG,KAAK,SAAC0G,GACH,GAAI0G,GAAa3M,EAAEyD,KAAK2P,EAAK5N,QAAQ1C,OAASY,GAAMuC,EAAYvC,IAEhE,OADA1D,GAAE4D,OAAO+I,EAAY1G,GACd0G,IAEVpN,KAAK,SAAC8T,GAiOH,MAjOoBD,GAAK7N,gBAAgBpB,OAAOkP,QAqOxDhX,IAAK,wBACL+C,MAnOiB,SAAC3B,GAClBc,KAAKgH,gBAAgBW,YAAYzI,MAsOjCpB,IAAK,eACL+C,MApOQ,SAAC3B,GACT,MAAOc,MAAKgH,gBAAgBY,SAAS1I,MAuOrCpB,IAAK,YACL+C,MArOK,SAACoN,GACNjO,KAAKoN,aAAea,EACpBjO,KAAKsU,cAwOLxW,IAAK,eACL+C,MAtOQ,SAAC3B,GACTc,KAAK+M,gBAAgBnI,GAAGsB,KAAKhH,MAyO7BpB,IAAK,iBACL+C,MAxOU,SAAC3B,GACXc,KAAK+M,gBAAgBnI,GAAGuB,OAAOjH,OA5EjCgV,IA+EN5V,SAAQC,OAAO,+BACX,cAEC4C,UAAU,mBAAoB,WA0O/B,MA1OqC,IAAI8S,KACxC7U,SAAS,qBAAsB,IAC/BkB,WAAW,uBAAwB4T,EA2OxC,IAzOMa,GAAiB,WAER,QAFTA,GAEUpR,EAAQsD,EAASoM,GAyOzB,GAAI2B,GAAUhV,IAEd7B,GAAgB6B,KA7OlB+U,GAGE/U,KAAK2D,OAASA,EACd3D,KAAKqT,cAAgBA,EACrBrT,KAAKiH,QAAUA,EAEfjH,KAAKiV,cACCC,QAAU,WAAYC,QAAS,IAC/BD,QAAU,UAAWC,QAAS,IAC9BD,QAAU,SAAUE,SAAiC,SAAtBpV,KAAKiH,QAAQ8B,OAC5CmM,QAAU,QAASC,QAAS,IAElCnV,KAAK2D,OAAO4J,IAAI,sBAAuB,WAwOnC,MAxOyCyH,GAAKK,iBAClDrV,KAAK2D,OAAO4J,IAAI,wBAAyB,WA0OrC,MA1O2CyH,GAAKK,iBAmQxD,MAmHIN,GAAkBnU,SAAW,SAAU,UAAW,iBAxItD1D,EA5PE6X,IA6PEjX,IAAK,eACL+C,MA7OQ,WACRb,KAAK2D,OAAO2R,WAAW,2BAgPvBxX,IAAK,UACL+C,MA9OG,WA+OC,GAAI0U,GAAUvV,IA9OlBA,MAAKqT,cACAmC,mBAAmBxV,KAAKiH,QAAQ9B,IAChCnE,KAAK,WA+OF,MA/OQuU,GAAKF,oBAmPrBvX,IAAK,aACL+C,MAjPM,SAAC4U,GACPzV,KAAKiV,YAAYQ,GAAKN,QAAS,MA5BjCJ,IAiCNzW,SAAQC,OAAO,sBACX,kBACA,qBACA,8BACA,6BACA,4BACA,2BACA,iCACDC,QAAAA,iBAAAA,YAAO,SAACkB,EAAgBiH,GA4OvB,MA3OAjH,GACIkH,KAAK,wBACDxG,YAAa,2BACbE,WAAY,oBACZD,aAAc,MAOdwG,QAAUF,EACVkB,SAAYZ,SAAAA,iBAAAA,SAAU,SAACoB,EAAgBN,GA2OnC,MA3O8CM,GAAeL,SAASD,EAAOE,QAAQC,OAAOC,mBAkYpG7H,WA/XHA,oBAAWyU,EA6OhB,IA5OMW,GACS,QADTA,KA6OFvX,EAAgB6B,KA7Od0V,GAEE1V,KAAKE,SAAW,IAChBF,KAAKG,OAAU8G,QAAU,KACzBjH,KAAKI,YAAc,kCACnBJ,KAAKM,WAAa,0BAClBN,KAAKK,aAAe,OACpBL,KAAKwT,kBAAmB,GAI1BmC,EAAuB,WAEd,QAFTA,GAEUhS,EAAQiS,EAAIvN,GA4OpB,GAAIwN,GAAU7V,IAEd7B,GAAgB6B,KAhPlB2V,GAGE3V,KAAK4V,GAAKA,EACV5V,KAAKqI,eAAiBA,EACtBrI,KAAK4O,MAAQ,EAEb5O,KAAK6O,eACL7O,KAAKqQ,oBACLrQ,KAAK+O,aACDC,SACIC,OACIlG,KAAM,UAEVmG,aACIC,QACIC,QACIC,SAAS,KAIrBC,OACIvG,KAAM,WACNwG,sBACIX,MAAO,SACPY,KAAM,MAEVlK,OACI/D,KAAM,UAIlBkO,OAAQzP,KAAK6O,YACbvJ,OACI/D,KAAO,IAEXmO,SACIL,SAAS,GAEbM,SAAS,GAGbhM,EAAO4J,IAAI,uBAAwB,WAgP/B,MAhPqCsI,GAAKxF,sBA+RlD,MAoFIsF,GAAwB/U,SAAW,SAAU,KAAM,kBA/HvD1D,EA9REyY,IA+RE7X,IAAK,WACL+C,MAnPI,SAACuP,GAEL,MADApQ,MAAK4O,OAASwB,EACPpQ,KAAKqQ,uBAsPZvS,IAAK,oBACL+C,MApPa,WAqPT,GAAIiV,GAAU9V,IAlPlB,OAFA2V,GAAwBI,WAAW/V,KAAK6O,aAEjC7O,KAAK4V,GAAGlE,KACX1R,KAAKqI,eAAe2N,sBAAsBhW,KAAKiH,QAAQ9B,GAAInF,KAAK4O,OAChE5O,KAAKqI,eAAe4N,eAAejW,KAAKiH,QAAQ9B,GAAInF,KAAK4O,SAC1D5N,KAAK,SAACkV,GACL,GAAIC,GAAe1U,EAAEyU,EAAY,IACxBlG,IAAI2F,EAAwB1F,cAC5BC,OAAO,QACPF,IAAI2F,EAAwBxF,oBAC5BtP,QACLuV,EAAkB3U,EAAEyU,EAAY,IAC3BlG,IAAI2F,EAAwB1F,cAC5BC,OAAO,QACPF,IAAI2F,EAAwBxF,oBAC5BtP,OAIT,OAFAiV,GAAKjH,YAAYpM,MAAMoN,KAAQ,gBAAiBC,KAAQqG,IACxDL,EAAKjH,YAAYpM,MAAMoN,KAAQ,mBAAoBC,KAAQsG,IACpDN,EAAKjH,mBA+OhB/Q,IAAK,aACL+C,MA5Oa,SAACgO,GACdpN,EAAEE,cAAckN,SA+OhB/Q,IAAK,aACL+C,MA7Oa,WACb,MAAO,UAACA,GAAY,OAAS2P,KAAOC,KAAKC,IAAI7P,EAAM2P,KAAK,GAAI3P,EAAM2P,KAAK,GAAG,EAAG3P,EAAM2P,KAAK,IAAKG,cAAgB9P,EAAM8P,mBAkPnH7S,IAAK,mBACL+C,MAhPmB,WACnB,MAAO,UAACA,GAiPA,OAjPWA,EAAM2P,KAAM3P,EAAM8P,oBAnFvCgF,IAwFNrX,SAAQC,OAAO,4BAA8B,kBACxC4C,UAAU,eAAgB,WAoP3B,MApPiC,IAAIuU,KACpCpV,WAAW,0BAA2BqV,EAsP3C,IApPMU,GAES,QAFTA,KAqPFlY,EAAgB6B,KArPdqW,GAGErW,KAAKsW,SAAW,IAChBtW,KAAKI,YAAc,mCACnBJ,KAAKG,OACD8G,QAAU,KAEdjH,KAAKM,WAAa,oBAClBN,KAAKK,aAAe,MACpBL,KAAKwT,kBAAmB,GAI1B+C,EAAiB,WAER,QAFTA,GAEU5S,EAAQmE,EAAarH,GAmP7BtC,EAAgB6B,KArPlBuW,GAGEvW,KAAK2D,OAASA,EACd3D,KAAK8H,YAAcA,EACnB9H,KAAKS,cAAgBA,EA2QzB,MAqHI8V,GAAkB3V,SAAW,SAAU,cAAe,iBAzI1D1D,EA5PEqZ,IA6PEzY,IAAK,eACL+C,MAtPQ,SAAC2V,GAuPL,GAAIC,GAAUzW,IAtPlB1B,SAAQkE,QAAQgU,EAAQ,SAAChE,GACrBiE,EAAK3O,YAAY4O,OAAOD,EAAKxP,QAASuL,GACjCxR,KAAK,SAAC9B,GACHuX,EAAK9S,OAAOmQ,MAAM,wBAClB,KACI2C,EAAKhW,cAAc,mBACf0D,KAAMjF,EAAKoG,MACXC,KAAMrG,EAAKsG,MAAM5G,IACjB6G,MAAO,MAEb,MAAOC,aAnBvB6Q,IA0BNjY,SAAQC,OAAO,6BACX,oBACA,sBACA,iBAEC4C,UAAU,gBAAiB,WAqP5B,MArPkC,IAAIkV,KACrC/V,WAAW,oBAAqBiW","file":"podcastserver.min.js","sourcesContent":["angular.module('podcastApp', [\n    'ps.search',\n    'ps.podcast',\n    'ps.item',\n    'ps.download',\n    'ps.player',\n    'ps.stats',\n    'ps.common',\n    'ps.dataservice',\n    'ps.config',\n    'ps.partial'\n]);\nangular.module('ps.config', [\n    'ps.config.route',\n    'ps.config.loading',\n    'ps.config.restangular',\n    'ps.config.ngstomp',\n    'ps.config.module'\n]);\nangular\n    .module('ps.config.loading', [ 'angular-loading-bar' ])\n    .config((cfpLoadingBarProvider) =>  { cfpLoadingBarProvider.includeSpinner = false; } );\nangular.module('ps.config.module', [\n    'ngTouch',\n    'ngAnimate',\n    'ui.bootstrap',\n    'truncate'\n]);\nangular\n    .module('ps.config.ngstomp', ['AngularStompDK'])\n    .config((ngstompProvider) => ngstompProvider.url('/ws').credential('login', 'password').class(SockJS));\nangular\n    .module('ps.config.restangular', ['restangular'])\n    .config((RestangularProvider) => {\n        RestangularProvider.setBaseUrl('/api/');\n        RestangularProvider.addElementTransformer('items', false, (item) => {\n            item.addRestangularMethod('reset', 'get', 'reset');\n            item.addRestangularMethod('download', 'get', 'addtoqueue');\n            return item;\n        });\n    });\nangular\n    .module('ps.config.route', ['ngRoute','cfp.hotkeys'])\n    .constant('commonKey', [\n        ['h', 'Goto Home', (event) => {\n            event.preventDefault();\n            window.location.href = '/items';\n        }],\n        ['s', 'Goto Search', (event) =>  {\n            event.preventDefault();\n            window.location.href = '/item/search';\n        }],\n        ['p', 'Goto Podcast List', (event) =>  {\n            event.preventDefault();\n            window.location.href = '/podcasts';\n        }],\n        ['d', 'Goto Download List', (event) =>  {\n            event.preventDefault();\n            window.location.href = '/download';\n        }]\n    ])\n    .config($routeProvider => $routeProvider.otherwise({redirectTo: '/items'}))\n    .config($locationProvider => $locationProvider.html5Mode(true));\n\nclass authorizeNotificationDirective {\n    constructor() {\n        this.replace = true;\n        this.restrict = 'E';\n        this.scope = true;\n        this.templateUrl = 'html/authorize-notification.html';\n        this.controllerAs = 'an';\n        this.controller = 'authorizeNotificationController';\n    }\n}\n\nclass authorizeNotificationController {\n    constructor($window, $notification) {\n        this.$window = $window;\n        this.$notification = $notification;\n        this.state = this.hasToBeShown();\n    }\n\n    manuallyactivate() {\n        this.$notification\n            .requestPermission()\n            .then(() => { this.state = this.hasToBeShown();});\n    }\n\n    hasToBeShown() {\n        return (('Notification' in this.$window) && this.$window.Notification.permission != 'granted');\n    }\n}\n\nangular.module('authorize-notification', ['notification'])\n    .directive('authorizeNotification', () => new authorizeNotificationDirective())\n    .controller('authorizeNotificationController', authorizeNotificationController);\n\nangular.module('ps.common', [\n    'ps.filters',\n    'navbar',\n    'authorize-notification',\n    'device-detection',\n    'updating'\n]);\nclass deviceDetectorService {\n    constructor($window) {\n        this.$window = $window;\n    }\n\n    isTouchedDevice() {\n        return 'ontouchstart' in this.$window;\n    }\n}\n\nangular.module('device-detection', [])\n    .service('deviceDetectorService', deviceDetectorService);\nangular.module('ps.filters', [])\n    .filter('htmlToPlaintext', function () {\n        return function(text) {\n            return String(text || \"\").replace(/<[^>]+>/gm, '');\n        };\n    }\n);\n/**\n * Created by kevin on 14/08/2014.\n */\n\n_.mixin({\n    // Update in place, does not preserve order\n    updateinplace : function(localArray, remoteArray, comparisonFunction = (inArray, elem) => inArray.indexOf(elem), withOrder = false) {\n\n        // Remove from localArray what is not in the remote array :\n        _.forEachRight(localArray.slice(), (elem, key) => (comparisonFunction(remoteArray, elem) === -1) && localArray.splice(key, 1));\n\n        // Add to localArray what is new in the remote array :\n        _.forEach(remoteArray, (elem) => (comparisonFunction(localArray, elem) === -1) && localArray.push(elem));\n\n        if (withOrder) {\n            _.forEach(remoteArray, (elem, key) => {\n                var elementToMove = localArray.splice(comparisonFunction(localArray, elem), 1)[0];\n                localArray.splice(key, 0, elementToMove);\n            });\n        }\n        \n        return localArray;\n    }\n});\n\nclass navbarController {\n    constructor() {\n        this.navCollapsed = true;\n    }\n}\n\nclass navbarDirective {\n    constructor() {\n        this.transclude = true;\n        this.replace = true;\n        this.restrict = 'E';\n        this.scope = true;\n        this.templateUrl = 'html/navbar.html';\n        this.controller = 'navbarController';\n        this.controllerAs = 'navbar';\n    }\n\n    link(scope, element) {\n        element.removeClass('hidden');\n    }\n}\n\nangular.module('navbar', [])\n    .directive('navbar', () => new navbarDirective())\n    .controller('navbarController', navbarController);\n\nclass UpdatingDirective {\n    constructor() {\n        this.restrict = 'E';\n        this.scope = true;\n        this.templateUrl = 'html/updating.html';\n        this.controller = 'UpdatingController';\n        this.controllerAs = 'uc';\n    }\n\n    link(scope, element) {\n\n        let liParent = element.parent().parent()[0];\n\n        if (liParent && liParent.tagName === 'LI') {\n            let liElement = angular.element(liParent);\n            liElement.addClass('hidden');\n            scope.$watch(\n                'uc.isUpdating',\n                (newValue) => (newValue) ? liElement.removeClass('hidden') : liElement.addClass('hidden')\n            );\n        }\n    }\n}\n\nclass UpdatingController {\n    constructor(ngstomp, $scope) {\n        this.ngstomp = ngstomp;\n        this.isUpdating = false;\n        this.$scope = $scope;\n\n        this.ngstomp\n            .subscribe('/app/updating', (message) => this.updateStatus(message), $scope)\n            .subscribe('/topic/updating', (message) => this.updateStatus(message), $scope);\n    }\n\n    updateStatus(message) {\n        this.isUpdating = JSON.parse(message.body);\n    }\n}\n\nangular.module('updating', ['AngularStompDK'])\n    .directive('updateStatus', () => new UpdatingDirective())\n    .controller('UpdatingController', UpdatingController);\n\n\nclass DownloadCtrl {\n\n    constructor($scope, DonwloadManager, $notification) {\n        this.DonwloadManager = DonwloadManager;\n        this.$notification = $notification;\n        this.items =[];\n        this.waitingitems = [];\n        this.numberOfSimDl = 0;\n\n        this.DonwloadManager.getNumberOfSimDl().then((value) => {\n            this.numberOfSimDl = parseInt(value);\n        });\n\n        /** Websocket Connection */\n        this.DonwloadManager.ws\n            .subscribe(\"/app/download\", (message) => this.onSubscribeDownload(message), $scope)\n            .subscribe(\"/app/waiting\", (message) => this.onSubscribeWaiting(message), $scope)\n            .subscribe(\"/topic/download\", (message) => this.onDownloadUpdate(message), $scope)\n            .subscribe(\"/topic/waiting\", (message) => this.onWaitingUpdate(message), $scope);\n    }\n\n    onSubscribeDownload(message) {\n        this.items = JSON.parse(message.body);\n    }\n    onSubscribeWaiting(message) {\n        this.waitingitems = JSON.parse(message.body);\n    }\n    onDownloadUpdate(message) {\n        let item = JSON.parse(message.body);\n        let elemToUpdate = _.find(this.items, { 'id': item.id });\n        switch (item.status) {\n            case 'Started' :\n            case 'Paused' :\n                if (elemToUpdate)\n                    _.assign(elemToUpdate, item);\n                else\n                    this.items.push(item);\n                break;\n            case 'Finish' :\n                try {\n                    this.$notification('Téléchargement terminé', {\n                        body: item.title,\n                        icon: item.cover.url,\n                        delay: 5000\n                    });\n                } catch (e) {\n\n                }\n                this.onStoppedFromWS(elemToUpdate);\n                break;\n            case 'Stopped' :\n                this.onStoppedFromWS(elemToUpdate);\n                break;\n        }\n    }\n\n    onStoppedFromWS(elemToUpdate) {\n        if (elemToUpdate) {\n            _.remove(this.items, function (item) {\n                return item.id === elemToUpdate.id;\n            });\n        }\n    }\n\n    onWaitingUpdate(message) {\n        let remoteWaitingItems = JSON.parse(message.body);\n        _.updateinplace(this.waitingitems, remoteWaitingItems, (inArray, elem) => _.findIndex(inArray, { 'id': elem.id }), true);\n    }\n\n    getTypeFromStatus(item) {\n        if (item.status === \"Paused\")\n            return \"warning\";\n        return \"info\";\n    }\n    updateNumberOfSimDl(number) {\n        this.DonwloadManager.updateNumberOfSimDl(number);\n    }\n\n    /** Spécifique aux éléments de la liste : **/\n    download(item){\n        this.DonwloadManager.download(item);\n    }\n    stopDownload(item){\n        this.DonwloadManager.ws.stop(item);\n    }\n    toggleDownload(item){\n        this.DonwloadManager.ws.toggle(item);\n    }\n\n    /** Global **/\n    stopAllDownload(){\n        this.DonwloadManager.stopAllDownload();\n    }\n    pauseAllDownload(){\n        this.DonwloadManager.pauseAllDownload();\n    }\n    restartAllCurrentDownload(){\n        this.DonwloadManager.restartAllCurrentDownload();\n    }\n    removeFromQueue(item){\n        this.DonwloadManager.removeFromQueue(item);\n    }\n    dontDonwload(item){\n        this.DonwloadManager.dontDonwload(item);\n    }\n    moveInWaitingList(item, position){\n        this.DonwloadManager.moveInWaitingList(item, position);\n    }\n\n}\n\nangular.module('ps.download', [\n    'ps.config.route',\n    'ps.dataService.donwloadManager',\n    'notification'\n])\n    .config(($routeProvider, commonKey) =>\n        $routeProvider.\n            when('/download', {\n                templateUrl: 'html/download.html',\n                controller: 'DownloadCtrl',\n                controllerAs: 'dc',\n                hotkeys: commonKey\n            })\n    )\n    .controller('DownloadCtrl', DownloadCtrl);\nclass ItemDetailCtrl {\n\n    constructor($scope, DonwloadManager, $location, playlistService, podcast, item){\n        this.item = item;\n        this.$location = $location;\n        this.item.podcast = podcast;\n        this.playlistService = playlistService;\n        this.DonwloadManager = DonwloadManager;\n\n        //** WebSocket Inscription **//\n        let webSockedUrl = \"/topic/podcast/\".concat(this.item.podcast.id);\n\n        this.DonwloadManager\n            .ws\n            .subscribe(webSockedUrl, (message) => {\n                let itemFromWS = JSON.parse(message.body);\n                if (itemFromWS.id == this.item.id) {\n                    _.assign(this.item, itemFromWS);\n                }\n            }, $scope);\n\n    }\n\n    stopDownload(item) {\n        this.DonwloadManager.ws.stop(item);\n    }\n\n    toggleDownload(item) {\n        this.DonwloadManager.ws.toggle(item);\n    }\n\n    remove(item) {\n        return item.remove()\n            .then(() => {\n            this.playlistService.remove(item);\n            this.$location.path('/podcasts/'.concat(this.item.podcast.id));\n        });\n    }\n\n    reset(item) {\n        return item.reset()\n            .then((itemReseted) => {\n                _.assign(this.item, itemReseted);\n                this.playlistService.remove(item);\n            });\n    }\n\n    toggleInPlaylist() {\n        this.playlistService.addOrRemove(this.item);\n    }\n\n    isInPlaylist() {\n        return this.playlistService.contains(this.item);\n    }\n}\n\nangular.module('ps.item.details', [\n    'ps.dataService.donwloadManager',\n    'ps.player'\n]).config(function($routeProvider, commonKey) {\n    $routeProvider.\n        when('/podcasts/:podcastId/item/:itemId', {\n            templateUrl: 'html/item-detail.html',\n            controller: 'ItemDetailCtrl',\n            controllerAs: 'idc',\n            hotkeys: commonKey,\n            resolve : {\n                item : function (itemService, $route) {\n                    return itemService.findById($route.current.params.podcastId, $route.current.params.itemId);\n                },\n                podcast : function (podcastService, $route) {\n                    return podcastService.findById($route.current.params.podcastId);\n                }\n            }\n        });\n})\n    .controller('ItemDetailCtrl', ItemDetailCtrl);\nangular.module(\"ps.partial\", []).run([\"$templateCache\", function($templateCache) {$templateCache.put(\"html/authorize-notification.html\",\"<div ng-show=\\\"an.state\\\" class=\\\"alert alert-info text-center\\\" role=\\\"alert\\\">\\n    <a ng-click=\\\"an.manuallyactivate()\\\" class=\\\"btn btn-primary\\\">Activer Notification</a>\\n</div>\\n\");\n$templateCache.put(\"html/download.html\",\"<div class=\\\"container downloadList\\\">\\n\\n    <div class=\\\"row form-horizontal\\\" style=\\\"margin-top: 15px;\\\">\\n        <div class=\\\"col-xs-offset-1 col-md-offset-1 col-sm-offset-1 col-lg-offset-1 form-group col-md-6 col-lg-6 col-xs-6 col-sm-6 \\\">\\n            <label class=\\\"pull-left control-label\\\">Téléchargements simultanés</label>\\n            <div class=\\\"col-md-3 col-lg-3 col-xs-3 col-sm-3\\\">\\n                <input ng-model=\\\"dc.numberOfSimDl\\\" ng-change=\\\"dc.updateNumberOfSimDl(numberOfSimDl)\\\" type=\\\"number\\\" class=\\\"form-control\\\" placeholder=\\\"Number of download\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"btn-group pull-right\\\">\\n            <button ng-click=\\\"dc.restartAllDownload()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\">Démarrer</button>\\n            <button ng-click=\\\"dc.pauseAllDownload()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\">Pause</button>\\n            <button ng-click=\\\"dc.stopAllDownload()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\">Stop</button>\\n        </div>\\n    </div>\\n    <div class=\\\"media\\\"  ng-repeat=\\\"item in dc.items | orderBy:\\'-progression\\' track by item.id\\\" >\\n\\n        <div class=\\\"buttonList pull-right\\\">\\n            <br/>\\n            <button ng-click=\\\"dc.toggleDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-sm\\\"\\n                    ng-class=\\\"{\\'btn-primary\\' : item.status === \\'Started\\', \\'btn-warning\\' : item.status === \\'Paused\\'}\\\"><i class=\\\"glyphicon glyphicon-play\\\"></i><i class=\\\"glyphicon glyphicon-pause\\\"></i></button>\\n            <button ng-click=\\\"dc.stopDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-danger btn-sm\\\"><span class=\\\"glyphicon glyphicon-stop\\\"></span></button>\\n        </div>\\n\\n        <a class=\\\"pull-left\\\" ng-href=\\\"/podcasts/{{item.podcastId}}/item/{{item.id}}\\\">\\n            <img ng-src=\\\"{{item.cover.url}}\\\" >\\n        </a>\\n\\n        <div class=\\\"media-body\\\">\\n            <h5 class=\\\"media-heading\\\">{{item.title | characters:100}}</h5>\\n            <br/>\\n            <progressbar class=\\\"progress-striped active\\\" animate=\\\"false\\\" value=\\\"item.progression\\\" type=\\\"{{ dc.getTypeFromStatus(item) }}\\\">{{item.progression}}%</progressbar>\\n        </div>\\n    </div>\\n\\n\\n    <br/>\\n\\n    <accordion close-others=\\\"true\\\" ng-show=\\\"dc.waitingitems.length > 0\\\">\\n        <accordion-group is-open=\\\"true\\\">\\n            <accordion-heading>\\n                Liste d\\'attente <span class=\\\"pull-right badge\\\">{{ dc.waitingitems.length }}</span>\\n            </accordion-heading>\\n            <div class=\\\"media item-in-waiting-list clearfix\\\"  ng-repeat=\\\"item in dc.waitingitems track by item.id\\\"  >\\n\\n                <div class=\\\"pull-right\\\">\\n                    <br/>\\n                    <button ng-click=\\\"dc.removeFromQueue(item)\\\" type=\\\"button\\\" class=\\\"btn btn-primary btn-sm\\\"><i class=\\\"glyphicon glyphicon-minus\\\"></i></button>\\n                    <button ng-click=\\\"dc.dontDonwload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-danger btn-sm\\\"><i class=\\\"glyphicon glyphicon-stop\\\"></i></button>\\n                    <div class=\\\"btn-group\\\" dropdown is-open=\\\"isopen\\\" ng-show=\\\"dc.waitingitems.length > 1\\\">\\n                        <button type=\\\"button\\\" class=\\\"btn btn-default dropdown-toggle\\\" dropdown-toggle><i class=\\\"glyphicon glyphicon-option-vertical\\\"></i></button>\\n                        <ul class=\\\"dropdown-menu\\\" role=\\\"menu\\\">\\n                            <li ng-hide=\\\"$first\\\"><a ng-click=\\\"dc.moveInWaitingList(item, 0)\\\"><span class=\\\"fa fa-angle-double-up\\\"></span> Premier</a></li>\\n                            <li><a ng-hide=\\\"$first || $index === 1\\\" ng-click=\\\"dc.moveInWaitingList(item, $index-1)\\\"><span class=\\\"fa fa-angle-up\\\"></span> Monter</a></li>\\n                            <li><a ng-hide=\\\"$last || $index === dc.waitingitems.length-2\\\" ng-click=\\\"dc.moveInWaitingList(item, $index+1)\\\"><span class=\\\"fa fa-angle-down\\\"></span> Descendre</a></li>\\n                            <li><a ng-hide=\\\"$last\\\" ng-click=\\\"dc.moveInWaitingList(item, dc.waitingitems.length-1   )\\\"><span class=\\\"fa fa-angle-double-down\\\"></span> Dernier</a></li>\\n                        </ul>\\n                    </div>\\n                </div>\\n\\n                <a class=\\\"pull-left\\\" ng-href=\\\"/podcasts/{{item.podcastId}}/item/{{item.id}}\\\">\\n                    <img ng-src=\\\"{{item.cover.url}}\\\">\\n                </a>\\n\\n                <div class=\\\"media-body\\\">\\n                    <h5 class=\\\"media-heading\\\">{{item.title | characters:100}}</h5>\\n                </div>\\n            </div>\\n\\n        </accordion-group>\\n    </accordion>\\n\\n\\n</div>\");\n$templateCache.put(\"html/item-detail.html\",\"\\n<div class=\\\"container item-details\\\">\\n\\n    <br/>\\n    <ol class=\\\"breadcrumb\\\">\\n        <li><a href=\\\"/podcasts\\\">Podcasts</a></li>\\n        <li><a ng-href=\\\"/podcasts/{{ idc.item.podcast.id }}\\\"> {{ idc.item.podcast.title }}</a></li>\\n        <li class=\\\"active\\\">{{ idc.item.title }}</li>\\n    </ol>\\n\\n    <div>\\n        <div class=\\\"col-xs-12 col-sm-12 col-md-3 col-lg-3\\\">\\n            <div class=\\\"thumbnail\\\">\\n                <a ng-href=\\\"{{ idc.item.proxyURL || idc.item.url }}\\\" target=\\\"_self\\\">\\n                    <img class=\\\"center-block\\\" ng-src=\\\"{{idc.item.cover.url}}\\\" width=\\\"200\\\" height=\\\"200\\\">\\n                </a>\\n\\n                <div class=\\\"caption\\\">\\n\\n                    <div class=\\\"buttonList text-center\\\">\\n                        <!-- Téléchargement en cours -->\\n                        <span ng-show=\\\"idc.item.status == \\'Started\\' || idc.item.status == \\'Paused\\'\\\" >\\n                            <button ng-click=\\\"idc.toggleDownload(idc.item)\\\" type=\\\"button\\\" class=\\\"btn btn-primary \\\"><i class=\\\"glyphicon glyphicon-play\\\"></i><i class=\\\"glyphicon glyphicon-pause\\\"></i></button>\\n                            <button ng-click=\\\"idc.stopDownload(idc.item)\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-stop\\\"></span></button>\\n                        </span>\\n\\n                        <!-- Lancer le téléchargement -->\\n                        <button ng-click=\\\"idc.item.download()\\\" ng-show=\\\"(idc.item.status != \\'Started\\' && idc.item.status != \\'Paused\\' ) && !idc.item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\"><span class=\\\"glyphicon glyphicon-save\\\"></span></button>\\n\\n                        <a ng-href=\\\"/podcasts/{{ idc.item.podcast.id }}/item/{{ idc.item.id }}/play\\\" ng-show=\\\"idc.item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-success\\\"><span class=\\\"ionicons ion-social-youtube\\\"></span></a>\\n\\n                        <!-- Add to Playlist -->\\n                        <a ng-show=\\\"idc.item.isDownloaded\\\" ng-click=\\\"idc.toggleInPlaylist()\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\">\\n                            <span ng-hide=\\\"idc.isInPlaylist()\\\" class=\\\"glyphicon glyphicon-plus\\\"></span>\\n                            <span ng-show=\\\"idc.isInPlaylist()\\\" class=\\\"glyphicon glyphicon-minus\\\"></span>\\n                        </a>\\n\\n                        <div class=\\\"btn-group\\\" dropdown is-open=\\\"isopen\\\">\\n                            <button type=\\\"button\\\" class=\\\"btn btn-default dropdown-toggle\\\" dropdown-toggle><i class=\\\"glyphicon glyphicon-option-vertical\\\"></i></button>\\n                            <ul class=\\\"dropdown-menu dropdown-menu-right\\\" role=\\\"menu\\\">\\n                                <li ng-show=\\\"idc.item.isDownloaded\\\"><a target=\\\"_self\\\" ng-href=\\\"{{ idc.item.proxyURL }}\\\"><span class=\\\"glyphicon glyphicon-play text-success\\\"></span> Lire</a></li>\\n                                <li><a ng-click=\\\"idc.remove(idc.item)\\\" ng-show=\\\"(idc.item.status != \\'Started\\' && idc.item.status != \\'Paused\\' )\\\"><span class=\\\"glyphicon glyphicon-remove text-danger\\\"></span> Retirer</a></li>\\n                                <li><a ng-href=\\\"{{ idc.item.url }}\\\" target=\\\"_self\\\"><span class=\\\"glyphicon glyphicon-globe text-info\\\"></span> Lire en ligne</a></li>\\n                                <li><a ng-click=\\\"idc.reset(idc.item)\\\"><span class=\\\"glyphicon glyphicon-repeat\\\"></span> Reset</a></li>\\n                            </ul>\\n                        </div>\\n                        \\n                    </div>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"col-xs-12 col-sm-12 col-md-9 col-lg-9\\\">\\n            <div class=\\\"panel panel-default\\\">\\n                <div class=\\\"panel-heading\\\">\\n                    <h3 class=\\\"panel-title\\\">{{ idc.item.title }}</h3>\\n                </div>\\n                <div class=\\\"panel-body\\\">\\n                    {{ idc.item.description | htmlToPlaintext }}\\n                </div>\\n                <div class=\\\"panel-footer\\\">Date de publication : <strong>{{idc.item.pubdate | date : \\'dd/MM/yyyy à HH:mm\\' }}</strong></div>\\n            </div>\\n        </div>\\n\\n    </div>\\n</div>\\n\\n\");\n$templateCache.put(\"html/item-player.html\",\"<div class=\\\"container item-player\\\">\\n    <br/>\\n    <ol class=\\\"breadcrumb\\\">\\n        <li><a href=\\\"/podcasts\\\">Podcasts</a></li>\\n        <li><a ng-href=\\\"/podcasts/{{ ipc.item.podcast.id }}\\\"> {{ ipc.item.podcast.title }}</a></li>\\n        <li class=\\\"active\\\"><a ng-href=\\\"/podcasts/{{ ipc.item.podcast.id }}/item/{{ ipc.item.id }}\\\">{{ ipc.item.title }}</a></li>\\n    </ol>\\n\\n    <div ng-show=\\\"ipc.item.isDownloaded\\\" class=\\\"videogular-container\\\">\\n        <videogular vg-theme=\\\"ipc.config.theme.url\\\" vg-auto-play=\\\"ipc.config.autoPlay\\\" >\\n            <vg-media vg-src=\\\"ipc.config.sources\\\" vg-native-controls=\\\"false\\\"></vg-media>\\n\\n            <vg-controls vg-autohide=\\\"ipc.config.sources[0].type.indexOf(\\'audio\\') === -1 && ipc.config.plugins.controls.autoHide\\\" vg-autohide-time=\\\"ipc.config.plugins.controls.autoHideTime\\\">\\n                <vg-play-pause-button></vg-play-pause-button>\\n                <vg-time-display>{{ currentTime | date:\\'H:mm:ss\\':\\'+0000\\' }}</vg-time-display>\\n                <vg-scrub-bar>\\n                    <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\\n                </vg-scrub-bar>\\n                <vg-time-display>{{ timeLeft | date:\\'H:mm:ss\\':\\'+0000\\' }}</vg-time-display>\\n                <vg-volume>\\n                    <vg-mute-button></vg-mute-button>\\n                    <vg-volume-bar></vg-volume-bar>\\n                </vg-volume>\\n                <vg-fullscreen-button ng-show=\\\"ipc.config.sources[0].type.indexOf(\\'audio\\') === -1\\\"></vg-fullscreen-button>\\n                <div class=\\'btn-video-share\\'><a target=\\\"_self\\\" ng-href=\\\"{{ ipc.item.proxyURL }}\\\" class=\\\"ionicons ion-android-share\\\"></a></div>\\n            </vg-controls>\\n\\n            <vg-overlay-play></vg-overlay-play>\\n            \\n            <vg-poster vg-url=\\'ipc.config.plugins.poster\\'></vg-poster>\\n        </videogular>\\n    </div>\\n</div>\");\n$templateCache.put(\"html/items-search.html\",\"\\n<div class=\\\"container item-search-list\\\" ng-swipe-right=\\\"isc.swipePage(-1)\\\" ng-swipe-left=\\\"isc.swipePage(1)\\\">\\n    <!--<div class=\\\"col-xs-11 col-sm-11 col-lg-11 col-md-11\\\">-->\\n\\n    <div class=\\\"form-inline search-bar row\\\" ng-show=\\\"isc.search\\\">\\n        <div class=\\\"form-group col-sm-3 col-md-3 col-lg-3\\\">\\n            <div class=\\\"input-group\\\">\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"isc.searchParameters.term\\\" placeholder=\\\"Recherche globale\\\" ng-change=\\\"isc.resetSearch()\\\" ng-model-options=\\\"{ debounce: 500 }\\\">\\n                <span class=\\\"input-group-addon\\\" ng-click=\\\"isc.searchParameters.term = \\'\\'; isc.resetSearch()\\\"><i class=\\\"ionicons ion-android-cancel\\\"></i></span>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group col-sm-3 col-md-5 col-lg-5\\\">\\n            <div class=\\\"input-group input-group-tags-input\\\">\\n                <tags-input placeholder=\\\"Search by Tags\\\" add-from-autocomplete-only=\\\"true\\\" ng-model=\\\"isc.searchParameters.tags\\\" display-property=\\\"name\\\" class=\\\"bootstrap\\\" on-tag-added=\\\"isc.resetSearch()\\\" on-tag-removed=\\\"isc.resetSearch()\\\">\\n                    <auto-complete source=\\\"isc.loadTags($query)\\\" min-length=\\\"2\\\"></auto-complete>\\n                </tags-input>\\n                <span class=\\\"input-group-addon\\\" ng-click=\\\"isc.searchParameters.tags = []; isc.resetSearch()\\\"><i class=\\\"ionicons ion-android-cancel\\\"></i></span>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group col-sm-3 col-md-2 col-lg-2\\\">\\n            <select class=\\\"form-control\\\" ng-model=\\\"isc.searchParameters.properties\\\" ng-change=\\\"isc.resetSearch()\\\">\\n                <option value>Tri</option>\\n                <option value=\\\"pertinence\\\">Pertinence</option>\\n                <option value=\\\"pubdate\\\">Date publication</option>\\n                <option value=\\\"downloadDate\\\">Date de download</option>\\n            </select>\\n        </div>\\n\\n        <div class=\\\"form-group col-sm-3 col-md-2 col-lg-2\\\">\\n            <!--<select class=\\\"form-control\\\" ng-model=\\\"searchParameters.direction\\\" ng-change=\\\"changePage()\\\" ng-disabled=\\\"searchParameters.properties === \\'pertinence\\'\\\">-->\\n            <select class=\\\"form-control\\\" ng-model=\\\"isc.searchParameters.direction\\\" ng-change=\\\"isc.resetSearch()\\\">\\n                <option value>Ordre</option>\\n                <option value=\\\"DESC\\\">Descendant</option>\\n                <option value=\\\"ASC\\\">Ascendant</option>\\n            </select>\\n        </div>\\n    </div>\\n\\n    <div class=\\\"text-center row\\\" >\\n        <pagination ng-show=\\\"isc.totalPages > 1\\\" items-per-page=\\\"12\\\" max-size=\\\"10\\\" boundary-links=\\\"true\\\" total-items=\\\"isc.totalItems\\\" ng-model=\\\"isc.currentPage\\\" ng-change=\\\"isc.changePage()\\\" class=\\\"pagination pagination-centered\\\" previous-text=\\\"&lsaquo;\\\" next-text=\\\"&rsaquo;\\\" first-text=\\\"&laquo;\\\" last-text=\\\"&raquo;\\\"></pagination>\\n        <a ng-click=\\\"isc.search = !isc.search;\\\" ng-class=\\\"{\\'btn-primary\\' : isc.search, \\'btn-default\\' : !isc.search}\\\" class=\\\"btn pull-right search-button\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></a>\\n    </div>\\n    <div class=\\\"row\\\">\\n        <div ng-repeat=\\\"item in isc.items track by item.id\\\" class=\\\"col-lg-3  col-md-3 col-sm-4 col-xs-6 item-in-list\\\">\\n            <div class=\\\"box\\\">\\n                <div class=\\\"\\\">\\n                    <img ng-class=\\\"{\\'img-grayscale\\' : (!item.isDownloaded) }\\\" ng-src=\\\"{{ item.cover.url }}\\\" alt=\\\"\\\" class=\\\"img-responsive\\\" />\\n                    <div class=\\\"overlay-button\\\">\\n                        <div class=\\\"btn-group\\\" dropdown>\\n                            <button type=\\\"button\\\" class=\\\"btn dropdown dropdown-toggle\\\" dropdown-toggle><i class=\\\"glyphicon glyphicon-option-vertical\\\"></i></button>\\n                            <ul class=\\\"dropdown-menu dropdown-menu-right\\\" role=\\\"menu\\\">\\n                                <li ng-show=\\\"item.status == \\'Started\\' || item.status == \\'Paused\\'\\\">\\n                                    <a ng-show=\\\"item.status == \\'Started\\'\\\" ng-click=\\\"isc.toggleDownload(item)\\\"><i class=\\\"glyphicon glyphicon-play text-primary\\\"></i><i class=\\\"glyphicon glyphicon-pause text-primary\\\"></i> Mettre en pause</a>\\n                                    <a ng-show=\\\"item.status == \\'Paused\\'\\\" ng-click=\\\"isc.toggleDownload(item)\\\"><i class=\\\"glyphicon glyphicon-play text-primary\\\"></i><i class=\\\"glyphicon glyphicon-pause text-primary\\\"></i> Reprendre</a>\\n                                </li>\\n                                <li ng-show=\\\"item.status == \\'Started\\' || item.status == \\'Paused\\'\\\">\\n                                    <a ng-click=\\\"isc.stopDownload(item)\\\">\\n                                        <span class=\\\"glyphicon glyphicon-stop text-danger\\\"></span> Stopper\\n                                    </a>\\n                                </li>\\n                                <li ng-show=\\\"(item.status != \\'Started\\' && item.status != \\'Paused\\' ) && !item.isDownloaded\\\">\\n                                    <a ng-click=\\\"item.download()\\\">\\n                                        <span class=\\\"glyphicon glyphicon-save text-primary\\\"></span> Télécharger\\n                                    </a>\\n                                </li>\\n                                <li>\\n                                    <a ng-href=\\\"/podcasts/{{ item.podcastId }}/item/{{ item.id }}/play\\\" ng-show=\\\"item.isDownloaded\\\">\\n                                        <span class=\\\"ionicons ion-social-youtube text-success\\\"></span> Lire dans le player\\n                                    </a>\\n                                </li>\\n                                <li ng-show=\\\"item.isDownloaded\\\">\\n                                    <a ng-click=\\\"isc.addOrRemove(item)\\\">\\n                                        <span ng-hide=\\\"isc.isInPlaylist(item)\\\"><span class=\\\"glyphicon glyphicon-plus text-primary\\\"></span> Ajouter à la Playlist</span>\\n                                        <span ng-show=\\\"isc.isInPlaylist(item)\\\"><span class=\\\"glyphicon glyphicon-minus text-primary\\\"></span> Retirer de la Playlist</span>\\n                                    </a>\\n                                </li>\\n                                <li>\\n                                    <a ng-click=\\\"isc.remove(item)\\\"><span class=\\\"glyphicon glyphicon-remove text-danger\\\"></span> Supprimer</a>\\n                                </li>\\n                                <li>\\n                                    <a ng-click=\\\"isc.reset(item)\\\"><span class=\\\"glyphicon glyphicon-repeat\\\"></span> Reset</a>\\n                                </li>\\n                            </ul>\\n                        </div>\\n                    </div>\\n                    <a class=\\\"overlay-main-button\\\" target=\\\"_self\\\" ng-href=\\\"{{ item.proxyURL  }}\\\" >\\n                        <span ng-class=\\\"{\\'glyphicon-globe\\' : (!item.isDownloaded), \\'glyphicon-play\\' : (item.isDownloaded)}\\\" class=\\\"glyphicon \\\"></span>\\n                    </a>\\n                </div>\\n                <div class=\\\"text-center clearfix itemTitle center\\\" >\\n                    <a ng-href=\\\"/podcasts/{{item.podcastId}}/item/{{item.id}}\\\" tooltip-append-to-body=\\\"true\\\" tooltip=\\\"{{ item.title }}\\\" tooltip-placement=\\\"bottom\\\" >\\n                        {{ item.title | characters:30 }}\\n                    </a>\\n                </div>\\n                <div class=\\\"text-center row-button\\\">\\n                        <span ng-show=\\\"item.status == \\'Started\\' || item.status == \\'Paused\\'\\\" >\\n                            <button ng-click=\\\"isc.toggleDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-primary \\\"><i class=\\\"glyphicon glyphicon-play\\\"></i><i class=\\\"glyphicon glyphicon-pause\\\"></i></button>\\n                            <button ng-click=\\\"isc.stopDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-stop\\\"></span></button>\\n                        </span>\\n\\n                    <button ng-click=\\\"item.download()\\\" ng-show=\\\"(item.status != \\'Started\\' && item.status != \\'Paused\\' ) && !item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\"><span class=\\\"glyphicon glyphicon-save\\\"></span></button>\\n                    <a target=\\\"_self\\\" ng-href=\\\"{{ item.proxyURL }}\\\" ng-show=\\\"!item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-info\\\"><span class=\\\"glyphicon glyphicon-globe\\\"></span></a>\\n\\n                    <a target=\\\"_self\\\" ng-href=\\\"{{ item.proxyURL }}\\\" ng-show=\\\"item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-success\\\"><span class=\\\"glyphicon glyphicon-play\\\"></span></a>\\n                    <button ng-click=\\\"isc.remove(item)\\\" ng-show=\\\"item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></button>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n    <!--</div>-->\\n    <div class=\\\"text-center row\\\" ng-show=\\\"isc.totalPages > 1\\\">\\n        <pagination items-per-page=\\\"12\\\" max-size=\\\"10\\\" boundary-links=\\\"true\\\" total-items=\\\"isc.totalItems\\\" ng-model=\\\"isc.currentPage\\\" ng-change=\\\"isc.changePage()\\\" class=\\\"pagination pagination-centered\\\" previous-text=\\\"&lsaquo;\\\" next-text=\\\"&rsaquo;\\\" first-text=\\\"&laquo;\\\" last-text=\\\"&raquo;\\\"></pagination>\\n    </div>\\n</div>\\n\");\n$templateCache.put(\"html/navbar.html\",\"<nav class=\\\"navbar navbar-inverse navbar-fixed-top\\\" role=\\\"navigation\\\">\\n    <div class=\\\"container-fluid\\\">\\n        <div>\\n            <a class=\\\"navbar-brand\\\" href=\\\"/items\\\">Podcast Server</a>\\n        </div>\\n        <ul class=\\\"nav navbar-nav pull-right\\\" ng-transclude></ul>\\n    </div>\\n</nav>\");\n$templateCache.put(\"html/player.html\",\"<div class=\\\"container video-player\\\">\\n    <br/>\\n    <div class=\\\"col-lg-8 player\\\">\\n        <videogular vg-auto-play=\\\"pc.config.autoPlay\\\" vg-player-ready=\\\"pc.onPlayerReady($API)\\\" vg-complete=\\\"pc.onCompleteVideo()\\\">\\n            <vg-media vg-src=\\\"pc.config.sources\\\" vg-native-controls=\\\"false\\\" vg-preload=\\\"pc.config.preload\\\"></vg-media>\\n\\n            <vg-controls vg-autohide=\\\"pc.config.sources[0].type.indexOf(\\'audio\\') === -1 && pc.config.plugins.controls.autoHide\\\" vg-autohide-time=\\\"pc.config.plugins.controls.autoHideTime\\\">\\n                <vg-play-pause-button></vg-play-pause-button>\\n                <vg-time-display>{{ currentTime | date:\\'H:mm:ss\\':\\'+0000\\' }}</vg-time-display>\\n                <vg-scrub-bar>\\n                    <vg-scrub-bar-current-time></vg-scrub-bar-current-time>\\n                </vg-scrub-bar>\\n                <vg-time-display>{{ timeLeft | date:\\'H:mm:ss\\':\\'+0000\\' }}</vg-time-display>\\n                <vg-volume>\\n                    <vg-mute-button></vg-mute-button>\\n                    <vg-volume-bar></vg-volume-bar>\\n                </vg-volume>\\n                <vg-fullscreen-button ng-show=\\\"pc.config.sources[0].type.indexOf(\\'audio\\') === -1\\\"></vg-fullscreen-button>\\n                <div class=\\'btn-video-share\\'><a target=\\\"_self\\\" ng-href=\\\"{{ pc.config.sources[0].src }}\\\" class=\\\"ionicons ion-android-share\\\"></a></div>\\n            </vg-controls>\\n\\n            <vg-overlay-play></vg-overlay-play>\\n\\n            <vg-poster vg-url=\\'pc.config.plugins.poster\\'></vg-poster>\\n        </videogular>\\n    </div>\\n    <div class=\\\"playlist col-lg-4\\\">\\n        <div class=\\\"row button-list\\\">\\n            <div class=\\\"col-lg-6 col-sm-6 col-xs-6 col-md-6 text-center\\\" ng-click=\\\"pc.reloadPlaylist()\\\"><span class=\\\"ionicons ion-refresh\\\"></span> Rafraichir</div>\\n            <div class=\\\"col-lg-6 col-sm-6 col-xs-6 col-md-6 text-center\\\" ng-click=\\\"pc.removeAll ()\\\"><span class=\\\"ionicons ion-trash-b\\\"></span> Vider</div>\\n        </div>\\n        <div class=\\\"media clearfix\\\"  ng-repeat=\\\"item in pc.playlist track by item.id\\\" ng-class=\\\"{\\'isReading\\' : pc.currentVideo.id === item.id}\\\">\\n\\n            <button ng-click=\\\"pc.remove(item)\\\" type=\\\"button\\\" class=\\\"pull-right close\\\"><span aria-hidden=\\\"true\\\">&times;</span></button>\\n\\n            <a class=\\\"pull-left cover\\\" ng-click=\\\"pc.setVideo($index)\\\">\\n                <img ng-src=\\\"{{item.cover.url}}\\\" width=\\\"100\\\" height=\\\"100\\\" style=\\\"\\\">\\n            </a>\\n\\n            <div class=\\\"media-body\\\">\\n                <p ng-click=\\\"pc.setVideo($index)\\\" class=\\\"\\\">{{ item.title }}</p>\\n            </div>\\n        </div>\\n        \\n    </div>\\n\\n</div>\");\n$templateCache.put(\"html/podcast-creation.html\",\"<div class=\\\"jumbotron\\\">\\n    <div class=\\\"container\\\">\\n        <h1>Ajouter un Podcast</h1>\\n    </div>\\n</div>\\n\\n<div class=\\\"container\\\">\\n    <form class=\\\"form-horizontal\\\" role=\\\"form\\\" novalidate>\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"title\\\" class=\\\"col-sm-1 control-label\\\">Titre</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"title\\\" ng-model=\\\"pac.podcast.title\\\" required placeholder=\\\"Titre\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"url\\\" class=\\\"col-sm-1 control-label\\\">URL</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <input type=\\\"url\\\" class=\\\"form-control\\\" id=\\\"url\\\" ng-model=\\\"pac.podcast.url\\\" required placeholder=\\\"url\\\" ng-change=\\\"pac.changeType();pac.findInfo();\\\">\\n            </div>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"url\\\" class=\\\"col-sm-1 control-label\\\">Tags</label>\\n            <div class=\\\"col-sm-10\\\">\\n                <tags-input ng-model=\\\"pac.podcast.tags\\\" display-property=\\\"name\\\" min-length=\\\"1\\\" class=\\\"bootstrap\\\" placeholder=\\\"Ajouter un tag\\\">\\n                    <auto-complete source=\\\"pac.loadTags($query)\\\" min-length=\\\"2\\\"></auto-complete>\\n                </tags-input>\\n            </div>\\n        </div>\\n        <div class=\\\"form-group\\\">\\n            <label for=\\\"height\\\" class=\\\"col-sm-1 control-label\\\">Type</label>\\n\\n            <div class=\\\"col-sm-10\\\">\\n                <select class=\\\"form-control\\\" ng-model=\\\"pac.podcast.type\\\">\\n                    <option ng-repeat=\\\"type in pac.types | orderBy: \\'name\\'\\\" value=\\\"{{type.key}}\\\">{{ type.name }}</option>\\n                </select>\\n            </div>\\n        </div>\\n\\n\\n        <div class=\\\"form-group\\\">\\n            <div class=\\\"col-sm-offset-1 col-sm-10\\\">\\n                <div class=\\\"checkbox\\\">\\n                    <label>\\n                        <input type=\\\"checkbox\\\" ng-model=\\\"pac.podcast.hasToBeDeleted\\\"> Suppression Automatique\\n                    </label>\\n                </div>\\n            </div>\\n        </div>\\n\\n        <br/>\\n\\n        <div class=\\\"col-md-2 col-md-offset-1 text-center\\\">\\n            <img ng-src=\\\"{{ pac.podcast.cover.url || \\'http://placehold.it/200x200\\' }}\\\" class=\\\"img-thumbnail\\\" width=\\\"200\\\" height=\\\"200\\\">\\n        </div>\\n        <div class=\\\"col-xs-12 col-md-9\\\">\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"url\\\" class=\\\"col-sm-2 control-label\\\">URL</label>\\n\\n                <div class=\\\"col-sm-9\\\">\\n                    <input class=\\\"form-control\\\" ng-model=\\\"pac.podcast.cover.url\\\" required placeholder=\\\"url\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"width\\\" class=\\\"col-sm-2 control-label\\\">Lageur</label>\\n\\n                <div class=\\\"col-sm-3\\\">\\n                    <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"width\\\" ng-model=\\\"pac.podcast.cover.width\\\" required>\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"height\\\" class=\\\"col-sm-2 control-label\\\">Hauteur</label>\\n\\n                <div class=\\\"col-sm-3\\\">\\n                    <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"height\\\" ng-model=\\\"pac.podcast.cover.height\\\" required>\\n                </div>\\n            </div>\\n        </div>\\n\\n\\n        <div class=\\\"form-group\\\">\\n            <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n                <button ng-click=\\\"pac.save()\\\" class=\\\"btn btn-default\\\">Sauvegarder</button>\\n            </div>\\n        </div>\\n    </form>\\n</div>\\n\\n\\n\\n\");\n$templateCache.put(\"html/podcast-detail.html\",\"\\n\\n<div class=\\\"container\\\">\\n    <br/>\\n    <ol class=\\\"breadcrumb\\\">\\n        <li><a href=\\\"/podcasts\\\">Podcasts</a></li>\\n        <li><a class=\\\"active\\\"> {{ pdc.podcast.title }}</a></li>\\n    </ol>\\n\\n    <div>\\n        <div class=\\\"jumbotron podcast-details-header\\\" ng-style=\\\"{ \\'background-image\\' : \\'url(\\\\\\'\\'+ pdc.podcast.cover.url + \\'\\\\\\')\\'}\\\">\\n            <div class=\\\"information-area\\\">\\n                <div class=\\\"information-text\\\">\\n                    <h3><strong>{{ pdc.podcast.title }}</strong></h3>\\n                    <p>{{ pdc.podcast.totalItems }} Episodes</p>\\n                </div>\\n                <div class=\\\"action-button pull-right\\\">\\n                    <button ng-click=\\\"pdc.refresh()\\\" type=\\\"button\\\" class=\\\"btn btn-default\\\"><span class=\\\"glyphicon glyphicon-refresh\\\"></span></button>\\n                    <a type=\\\"button\\\" class=\\\"btn btn-default\\\" target=\\\"_self\\\" ng-href=\\\"/api/podcast/{{ pdc.podcast.id }}/rss\\\"><span class=\\\"ionicons ion-social-rss\\\"></span></a>\\n                </div>\\n            </div>\\n        </div>\\n    </div>\\n<br/>\\n\\n<div class=\\\"col-md-12 col-xs-12 col-sm-12 col-lg-12\\\">\\n\\n    <tabset>\\n        <tab heading=\\\"{{ pdc.podcastTabs[0].heading }}\\\" active=\\\"pdc.podcastTabs[0].active\\\" >\\n            <podcast-items-list podcast=\\\"pdc.podcast\\\"></podcast-items-list>\\n        </tab>\\n        <tab heading=\\\"{{ pdc.podcastTabs[1].heading }}\\\" active=\\\"pdc.podcastTabs[1].active\\\" >\\n            <podcast-edition podcast=\\\"pdc.podcast\\\"></podcast-edition>\\n        </tab>\\n        <tab heading=\\\"{{ pdc.podcastTabs[2].heading }}\\\" ng-hide=\\\"pdc.podcastTabs[2].disabled\\\" active=\\\"pdc.podcastTabs[2].active\\\" disable=\\\"pdc.podcastTabs[2].disabled\\\">\\n            <podcast-upload podcast=\\\"pdc.podcast\\\"></podcast-upload>\\n        </tab>\\n        <tab heading=\\\"{{ pdc.podcastTabs[3].heading }}\\\" ng-hide=\\\"pdc.podcastTabs[3].disabled\\\" active=\\\"pdc.podcastTabs[3].active\\\" disable=\\\"pdc.podcastTabs[3].disabled\\\">\\n            <podcast-stats podcast=\\\"pdc.podcast\\\"></podcast-stats>\\n        </tab>\\n    </tabset>\\n\\n\\n</div>\\n    </div>\\n\\n\\n\\n\");\n$templateCache.put(\"html/podcast-details-edition.html\",\"<br/>\\n<accordion close-others=\\\"true\\\">\\n    <accordion-group heading=\\\"Podcast\\\" is-open=\\\"true\\\">\\n        <form class=\\\"form-horizontal\\\" role=\\\"form\\\">\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"title\\\" class=\\\"col-sm-2 control-label\\\">Titre</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <input type=\\\"text\\\" class=\\\"form-control\\\" id=\\\"title\\\" ng-model=\\\"pec.podcast.title\\\" required placeholder=\\\"Titre\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"url\\\" class=\\\"col-sm-2 control-label\\\">URL</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <input type=\\\"url\\\" class=\\\"form-control\\\" id=\\\"url\\\" ng-model=\\\"pec.podcast.url\\\" required placeholder=\\\"url\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n                    <div class=\\\"checkbox\\\">\\n                        <label>\\n                            <input type=\\\"checkbox\\\" ng-model=\\\"pec.podcast.hasToBeDeleted\\\"> Suppression Auto\\n                        </label>\\n                    </div>\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"url\\\" class=\\\"col-sm-2 control-label\\\">Tags</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <tags-input ng-model=\\\"pec.podcast.tags\\\" display-property=\\\"name\\\" min-length=\\\"1\\\" class=\\\"bootstrap\\\" placeholder=\\\"Ajouter un tag\\\">\\n                        <auto-complete source=\\\"pec.loadTags($query)\\\" min-length=\\\"2\\\"></auto-complete>\\n                    </tags-input>\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"height\\\" class=\\\"col-sm-2 control-label\\\" >Type</label>\\n                <div class=\\\"col-sm-10\\\" >\\n                    <select class=\\\"form-control\\\" ng-model=\\\"pec.podcast.type\\\" disabled>\\n                        <option ng-value=\\\"pec.podcast.type\\\">{{ pec.podcast.type }}</option>\\n                    </select>\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n                    <button ng-click=\\\"pec.save()\\\" class=\\\"btn btn-default\\\">Sauvegarder</button>\\n                </div>\\n            </div>\\n        </form>\\n    </accordion-group>\\n    <accordion-group heading=\\\"Cover\\\">\\n        <form class=\\\"form-horizontal\\\" role=\\\"form\\\">\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"url\\\" class=\\\"col-sm-2 control-label\\\">URL</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <input type=\\\"url\\\" class=\\\"form-control\\\" id=\\\"url\\\" ng-model=\\\"pec.podcast.cover.url\\\" required placeholder=\\\"url\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"width\\\" class=\\\"col-sm-2 control-label\\\">Lageur</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"width\\\" ng-model=\\\"pec.podcast.cover.width\\\" required placeholder=\\\"url\\\">\\n                </div>\\n            </div>\\n            <div class=\\\"form-group\\\">\\n                <label for=\\\"height\\\" class=\\\"col-sm-2 control-label\\\">Hauteur</label>\\n                <div class=\\\"col-sm-10\\\">\\n                    <input type=\\\"number\\\" class=\\\"form-control\\\" id=\\\"height\\\" ng-model=\\\"pec.podcast.cover.height\\\" required placeholder=\\\"url\\\">\\n                </div>\\n            </div>\\n\\n            <div class=\\\"form-group\\\">\\n                <div class=\\\"col-sm-offset-2 col-sm-10\\\">\\n                    <button ng-click=\\\"pec.save()\\\" class=\\\"btn btn-default\\\">Sauvegarder</button>\\n                </div>\\n            </div>\\n        </form>\\n    </accordion-group>\\n    <accordion-group heading=\\\"Actions\\\">\\n        <button type=\\\"button\\\" class=\\\"btn btn-warning\\\" ng-click=\\\"pec.deletePodcast()\\\">\\n            <span class=\\\"glyphicon glyphicon-trash\\\"></span> Delete\\n        </button>\\n    </accordion-group>\\n</accordion>\\n\");\n$templateCache.put(\"html/podcast-details-episodes.html\",\"<br/>\\n<div ng-swipe-right=\\\"pic.swipePage(-1)\\\" ng-swipe-left=\\\"pic.swipePage(1)\\\">\\n    <div class=\\\"media clearfix\\\"  ng-repeat=\\\"item in pic.podcast.items | orderBy:\\'-pubdate\\' track by item.id\\\">\\n        <div class=\\\"buttonList pull-right\\\">\\n            <!-- Téléchargement en cours -->\\n        <span ng-show=\\\"item.status == \\'Started\\' || item.status == \\'Paused\\'\\\" >\\n            <button ng-click=\\\"pic.toggleDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-primary \\\"><i class=\\\"glyphicon glyphicon-play\\\"></i><i class=\\\"glyphicon glyphicon-pause\\\"></i></button>\\n            <button ng-click=\\\"pic.stopDownload(item)\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-stop\\\"></span></button>\\n        </span>\\n\\n            <!-- Lancer le téléchargement -->\\n            <button ng-click=\\\"item.download()\\\" ng-show=\\\"(item.status != \\'Started\\' && item.status != \\'Paused\\' ) && !item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-primary\\\"><span class=\\\"glyphicon glyphicon-save\\\"></span></button>\\n\\n            <!-- Lire dans le player -->\\n            <a ng-href=\\\"/podcasts/{{ item.podcastId }}/item/{{ item.id }}/play\\\" ng-show=\\\"item.isDownloaded\\\" type=\\\"button\\\" class=\\\"btn btn-success\\\"><span class=\\\"ionicons ion-social-youtube\\\"></span></a>\\n            \\n            <!-- Supprimer l\\'item -->\\n            <button ng-click=\\\"pic.remove(item)\\\" ng-show=\\\"(item.status != \\'Started\\' && item.status != \\'Paused\\' )\\\" type=\\\"button\\\" class=\\\"btn btn-danger\\\"><span class=\\\"glyphicon glyphicon-remove\\\"></span></button>\\n\\n            <!-- Menu complémentaire -->\\n            <div class=\\\"btn-group\\\" dropdown is-open=\\\"isopen\\\">\\n                <button type=\\\"button\\\" class=\\\"btn btn-default dropdown-toggle\\\" dropdown-toggle><i class=\\\"glyphicon glyphicon-option-vertical\\\"></i></button>\\n                <ul class=\\\"dropdown-menu dropdown-menu-right\\\" role=\\\"menu\\\">\\n                    <li ng-show=\\\"item.isDownloaded\\\"><a target=\\\"_self\\\" ng-href=\\\"{{ item.proxyURL }}\\\"><span class=\\\"glyphicon glyphicon-play text-success\\\"></span> Lire</a></li>\\n                    <li ng-show=\\\"item.isDownloaded\\\">\\n                        <a ng-hide=\\\"pic.isInPlaylist(item)\\\" ng-click=\\\"pic.addOrRemoveInPlaylist(item)\\\">\\n                            <span class=\\\"glyphicon glyphicon-plus text-primary\\\"></span> Ajouter à la Playlist\\n                        </a>\\n                        <a ng-show=\\\"pic.isInPlaylist(item)\\\" ng-click=\\\"pic.addOrRemoveInPlaylist(item)\\\">\\n                            <span class=\\\"glyphicon glyphicon-minus text-primary\\\"></span> Retirer de la Playlist\\n                        </a>\\n                    </li>\\n                    <li><a target=\\\"_self\\\" ng-href=\\\"{{ item.url }}\\\"><span class=\\\"glyphicon glyphicon-globe text-info\\\"></span> Lire en ligne</a></li>\\n                    <li><a ng-click=\\\"pic.reset(item)\\\"><span class=\\\"glyphicon glyphicon-repeat\\\"></span> Reset</a></li>\\n                </ul>\\n            </div>\\n        </div>\\n\\n        <a class=\\\"pull-left\\\" ng-href=\\\"/podcasts/{{pic.podcast.id}}/item/{{item.id}}\\\">\\n            <img ng-src=\\\"{{item.cover.url}}\\\" width=\\\"100\\\" height=\\\"100\\\" style=\\\"\\\">\\n        </a>\\n        \\n        <div class=\\\"media-body\\\">\\n            <h4 class=\\\"media-heading\\\">{{ item.title }}</h4>\\n            <p class=\\\"description hidden-xs hidden-sm branch-name\\\">{{item.description | htmlToPlaintext | characters : 130 }}</p>\\n            <p><strong>{{item.pubdate | date : \\'dd/MM/yyyy à HH:mm\\' }}</strong></p>\\n        </div>\\n    </div>\\n\\n    <div ng-show=\\\"pic.podcast.totalItems > pic.itemPerPage\\\" class=\\\"text-center\\\">\\n        <pagination items-per-page=\\\"pic.itemPerPage\\\" max-size=\\\"10\\\" boundary-links=\\\"true\\\" total-items=\\\"pic.podcast.totalItems\\\" ng-model=\\\"pic.currentPage\\\" ng-change=\\\"pic.loadPage()\\\" class=\\\"pagination pagination-centered\\\" previous-text=\\\"&lsaquo;\\\" next-text=\\\"&rsaquo;\\\" first-text=\\\"&laquo;\\\" last-text=\\\"&raquo;\\\"></pagination>\\n    </div>\\n</div>\\n\\n        \");\n$templateCache.put(\"html/podcast-details-stats.html\",\"<br/>\\n<div>\\n    <div class=\\\"input-group col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5 col-md-2 col-lg-2 col-xs-2 col-sm-2\\\">\\n        <a class=\\\"input-group-addon\\\" ng-click=\\\"pdsc.navigate(-1)\\\"> - </a>\\n        <input type=\\\"number\\\" class=\\\"form-control text-center\\\" placeholder=\\\"Number of Month\\\" ng-model=\\\"pdsc.month\\\" ng-change=\\\"pdsc.generateChartData()\\\" ng-model-options=\\\"{ debounce: 300 }\\\">\\n        <a class=\\\"input-group-addon\\\" ng-click=\\\"pdsc.navigate(1)\\\"> + </a>\\n    </div>\\n</div>\\n<div class=\\\"row\\\">\\n    <highchart id=\\\"statsOfPodcast\\\" config=\\\"pdsc.chartConfig\\\"></highchart>\\n</div>\\n\");\n$templateCache.put(\"html/podcast-details-upload.html\",\"<br/>\\n<div class=\\\"upload-item\\\">\\n    <div class=\\\"drop-box\\\"\\n         ng-file-drop=\\\"puc.onFileSelect($files)\\\"\\n         ng-file-drag-over-class=\\\"dropping\\\"\\n         ng-file-drag-over-delay=\\\"100\\\">\\n        <div class=\\\"upload-text\\\">\\n            Déposer un ou des fichiers ici\\n        </div>\\n    </div>\\n</div>\\n\");\n$templateCache.put(\"html/podcasts-list.html\",\"<div class=\\\"container podcast-list\\\">\\n\\n    <div class=\\\"form-inline search-bar row\\\">\\n        <div class=\\\"form-group\\\">\\n            <div class=\\\"input-group\\\">\\n                <div class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-search\\\"></i></div>\\n                <input type=\\\"text\\\" class=\\\"form-control\\\" ng-model=\\\"plc.filters.title\\\" placeholder=\\\"Recherche globale\\\" ng-model-options=\\\"{ debounce: 500 }\\\">\\n            </div>\\n        </div>\\n\\n        <div class=\\\"form-group\\\">\\n            <!-- glyphicon glyphicon-download -->\\n            <div class=\\\"input-group\\\">\\n                <div class=\\\"input-group-addon\\\"><i class=\\\"glyphicon glyphicon-download\\\"></i></div>\\n                <select class=\\\"form-control\\\" ng-model=\\\"plc.filters.type\\\">\\n                    <option value>All</option>\\n                    <option ng-repeat=\\\"type in plc.types | orderBy: \\'name\\'\\\" value=\\\"{{type.key}}\\\">{{ type.name }}</option>\\n                </select>\\n            </div>\\n        </div>\\n\\n    </div>\\n\\n\\n    <div class=\\\"row\\\">\\n        <div class=\\\"col-lg-2 col-md-3 col-sm-4 col-xs-6 thumb\\\" ng-repeat=\\\"podcast in plc.podcasts | filter: plc.filters | orderBy:\\'-lastUpdate\\'\\\">\\n            <a ng-href=\\\"/podcasts/{{ ::podcast.id }}\\\" >\\n                <img    class=\\\"img-responsive img-rounded\\\" ng-src=\\\"{{ ::podcast.cover.url}}\\\" width=\\\"{{ ::podcast.cover.width }}\\\" height=\\\"{{ ::podcast.cover.height }}\\\"\\n                        notooltip-append-to-body=\\\"true\\\" tooltip-placement=\\\"bottom\\\" tooltip=\\\"{{ ::podcast.title }}\\\"\\n                        />\\n            </a>\\n        </div>\\n    </div>\\n</div>\\n\\n\");\n$templateCache.put(\"html/stats.html\",\"<div class=\\\"container\\\">\\n    <br/>\\n    <div>\\n        <div class=\\\"input-group col-xs-offset-5 col-sm-offset-5 col-md-offset-5 col-lg-offset-5 col-md-2 col-lg-2 col-xs-2 col-sm-2\\\">\\n            <a class=\\\"input-group-addon\\\" ng-click=\\\"sc.navigate(-1)\\\"> - </a>\\n            <input type=\\\"number\\\" class=\\\"form-control text-center\\\" placeholder=\\\"Number of Month\\\" ng-model=\\\"sc.month\\\" ng-change=\\\"sc.generateChartData()\\\" ng-model-options=\\\"{ debounce: 300 }\\\">\\n            <a class=\\\"input-group-addon\\\" ng-click=\\\"sc.navigate(1)\\\"> + </a>\\n        </div>\\n    </div>\\n    <div class=\\\"row\\\">\\n        <highchart id=\\\"statsByType\\\" config=\\\"sc.chartConfig\\\"></highchart>\\n    </div>\\n</div>\");\n$templateCache.put(\"html/updating.html\",\"<span ng-show=\\\"uc.isUpdating\\\">\\n    <i class=\\\"glyphicon glyphicon-refresh\\\" ng-class=\\\"{updating : uc.isUpdating}\\\"></i>\\n</span>\");}]);\n/**\n * Created by kevin on 01/11/14.\n */\n\nangular.module('ps.item', [\n    'ps.item.details',\n    'ps.item.player'\n]);\nclass ItemPlayerController {\n\n    constructor(podcast, item, $timeout, deviceDetectorService) {\n        this.item = item;\n        this.item.podcast = podcast;\n        this.$timeout = $timeout;\n\n        this.config = {\n            autoPlay: true,\n            sources: [\n                { src : this.item.proxyURL, type : this.item.mimeType }\n            ],\n            plugins: {\n                controls: {\n                    autoHide: !deviceDetectorService.isTouchedDevice(),\n                    autoHideTime: 2000\n                },\n                poster: this.item.cover.url\n            }\n        };\n    }\n}\n\nangular.module('ps.item.player', [\n    'ngSanitize',\n    'ngRoute',\n    'device-detection',\n    'com.2fdevs.videogular',\n    'com.2fdevs.videogular.plugins.poster',\n    'com.2fdevs.videogular.plugins.controls',\n    'com.2fdevs.videogular.plugins.overlayplay',\n    'com.2fdevs.videogular.plugins.buffering'\n])\n    .config(($routeProvider) => {\n        $routeProvider.\n            when('/podcasts/:podcastId/item/:itemId/play', {\n                templateUrl: 'html/item-player.html',\n                controller: 'ItemPlayerController',\n                controllerAs: 'ipc',\n                resolve : {\n                        item : (itemService, $route) => itemService.findById($route.current.params.podcastId, $route.current.params.itemId),\n                        podcast : (podcastService, $route) => podcastService.findById($route.current.params.podcastId)\n                    }\n                });\n        })\n    .controller('ItemPlayerController', ItemPlayerController);\n\nclass PlayerController {\n    constructor(playlistService, $timeout, deviceDetectorService) {\n        this.playlistService = playlistService;\n        this.$timeout = $timeout;\n\n        this.playlist = [];\n        this.state = null;\n        this.API = null;\n        this.currentVideo = {};\n        this.config = {\n            autoPlay : true,\n            sources: [],\n            plugins: {\n                controls: {\n                    autoHide : !deviceDetectorService.isTouchedDevice(),\n                    autoHideTime: 2000\n                },\n                poster: ''\n            }\n        };\n        this.reloadPlaylist();\n    }\n\n    onPlayerReady(API) {\n        this.API = API;\n\n        if (this.API.currentState == 'play' || this.isCompleted)\n            this.API.play();\n\n        this.isCompleted = false;\n        this.setVideo(0);\n    }\n\n    onCompleteVideo() {\n        var indexOfVideo = this.getIndexOfVideoInPlaylist(this.currentVideo);\n        this.isCompleted = true;\n\n        if (indexOfVideo+1 === this.playlist.length) {\n            this.currentVideo = this.playlist[0];\n            return;\n        }\n\n        this.setVideo(indexOfVideo+1);\n    }\n\n    reloadPlaylist() {\n        _.updateinplace(this.playlist, this.playlistService.playlist(), function(inArray, elem) { return _.findIndex(inArray, { 'id': elem.id });});\n    }\n\n\n\n    setVideo(index) {\n        this.currentVideo = this.playlist[index];\n\n        if (this.currentVideo !== null && this.currentVideo !== undefined) {\n            this.API.stop();\n            this.config.sources = [{src : this.currentVideo.proxyURL, type : this.currentVideo.mimeType }];\n            this.config.plugins.poster = this.currentVideo.cover.url;\n        }\n    }\n\n    remove(item) {\n        this.playlistService.remove(item);\n        this.reloadPlaylist();\n        if (this.config.sources.length > 0 && this.config.sources[0].src === item.proxyURL) {\n            this.setVideo(0);\n        }\n    }\n\n    removeAll() {\n        this.playlistService.removeAll();\n        this.reloadPlaylist();\n    }\n\n    getIndexOfVideoInPlaylist(item) {\n        return this.playlist.indexOf(item);\n    }\n}\n\nangular.module('ps.player', [\n    'ngSanitize',\n    'ngRoute',\n    'device-detection',\n    'com.2fdevs.videogular',\n    'com.2fdevs.videogular.plugins.poster',\n    'com.2fdevs.videogular.plugins.controls',\n    'com.2fdevs.videogular.plugins.overlayplay',\n    'com.2fdevs.videogular.plugins.buffering',\n    'ps.player.playlist'\n])\n    .config(($routeProvider) => {\n        $routeProvider.\n            when('/player', {\n                templateUrl: 'html/player.html',\n                controller: 'PlayerController',\n                controllerAs: 'pc'\n            });\n    })\n    .controller('PlayerController', PlayerController);\nclass PlaylistService {\n\n    constructor($localStorage) {\n        this.$localStorage = $localStorage;\n        this.$localStorage.playlist = this.$localStorage.playlist || [];\n    }\n\n    playlist() {\n        return this.$localStorage.playlist;\n    }\n    add(item) {\n        this.$localStorage.playlist.push(item);\n    }\n    remove (item) {\n        this.$localStorage.playlist = _.remove(this.$localStorage.playlist, function(elem) { return elem.id !== item.id; });\n    }\n    contains(item) {\n        return angular.isObject(_.find(this.$localStorage.playlist, {id : item.id}));\n    }\n    addOrRemove (item) {\n        (this.contains(item)) ? this.remove(item) : this.add(item);\n    }\n    removeAll () {\n        this.$localStorage.playlist = [];\n    }\n}\n\nangular.module('ps.player.playlist', [\n    'ngStorage'\n]).service('playlistService', PlaylistService);\n\nclass PodcastCreationController {\n\n    constructor($location, defaultPodcast, tagService, podcastService, types) {\n        this.podcastService = podcastService;\n        this.$location = $location;\n        this.tagService = tagService;\n        this.podcast = angular.extend(this.podcastService.getNewPodcast(), defaultPodcast );\n        this.types = types;\n    }\n\n    findInfo() {\n        return this.podcastService.findInfo(this.podcast.url)\n            .then((podcastFetched) => {\n                this.podcast.title = podcastFetched.title;\n                this.podcast.description = podcastFetched.description;\n                this.podcast.type = podcastFetched.type;\n                this.podcast.cover.url = podcastFetched.cover.url;\n            });\n    }\n\n    loadTags(query) {\n        return this.tagService.search(query);\n    }\n\n    changeType() {\n        if (/beinsports\\.fr/i.test(this.podcast.url)) {\n            this.podcast.type = \"BeInSports\";\n        } else if (/canalplus\\.fr/i.test(this.podcast.url)) {\n            this.podcast.type = \"CanalPlus\";\n        } else if (/jeuxvideo\\.fr/i.test(this.podcast.url)) {\n            this.podcast.type = \"JeuxVideoFR\";\n        } else if (/jeuxvideo\\.com/i.test(this.podcast.url)) {\n            this.podcast.type = \"JeuxVideoCom\";\n        } else if (/parleys\\.com/i.test(this.podcast.url)) {\n            this.podcast.type = \"Parleys\";\n        } else if (/pluzz\\.francetv\\.fr/i.test(this.podcast.url)) {\n            this.podcast.type = \"Pluzz\";\n        } else if (/youtube\\.com/i.test(this.podcast.url)) {\n            this.podcast.type = \"Youtube\";\n        } else if (this.podcast.url.length > 0) {\n            this.podcast.type = \"RSS\";\n        } else {\n            this.podcast.type = \"Send\";\n        }\n    }\n\n    save() {\n        this.podcastService.save(this.podcast)\n            .then((podcast) => this.$location.path('/podcasts/' + podcast.id));\n    }\n\n}\n\nangular.module('ps.podcast.creation', [\n    'ps.config.route',\n    'ps.dataservice',\n    'ngTagsInput'\n])\n    .config(function($routeProvider, commonKey) {\n        $routeProvider.\n            when('/podcast-creation', {\n                templateUrl: 'html/podcast-creation.html',\n                controller: 'PodcastAddCtrl',\n                controllerAs: 'pac',\n                hotkeys: commonKey,\n                resolve : {\n                    types : typeService => typeService.findAll()\n                }\n            });\n    })\n    .constant('defaultPodcast', { hasToBeDeleted : true, cover : { height: 200, width: 200 } })\n    .controller('PodcastAddCtrl', PodcastCreationController);\nclass PodcastsListCtrl {\n    constructor(podcasts, types) {\n        this.podcasts = podcasts;\n        this.types = types;\n        this.filters = {\n            title : '',\n            type : ''\n        };\n    }\n}\n\nangular.module('ps.podcast.list', [\n    'ps.config.route',\n    'ps.dataService.podcast',\n    'ps.dataService.type'\n])\n    .config(($routeProvider, commonKey) => {\n        $routeProvider.\n            when('/podcasts', {\n                templateUrl: 'html/podcasts-list.html',\n                controller: 'PodcastsListCtrl',\n                controllerAs: 'plc',\n                hotkeys: commonKey,\n                resolve: {\n                    podcasts: (podcastService) => podcastService.findAll(),\n                    types: typeService => typeService.findAll()\n                }\n            });\n    })\n    .controller('PodcastsListCtrl', PodcastsListCtrl);\n/**\n * Created by kevin on 01/11/14.\n */\n\nangular.module('ps.podcast', [\n    'ps.podcast.details',\n    'ps.podcast.creation',\n    'ps.podcast.list'\n]);\nclass SearchItemCache {\n    constructor(DefaultItemSearchParameters, $sessionStorage) {\n        this.$sessionStorage = $sessionStorage;\n        this.$sessionStorage.searchParameters = DefaultItemSearchParameters;\n    }\n\n    getParameters() {\n        return this.$sessionStorage.searchParameters;\n    }\n\n    page(pageNumber) {\n        if (angular.isNumber(pageNumber)) {\n            this.$sessionStorage.searchParameters.page = pageNumber;\n        }\n\n        return this.$sessionStorage.searchParameters.page;\n    }\n\n    size(sizeNumber) {\n        if (angular.isNumber(sizeNumber)) {\n            this.$sessionStorage.searchParameters.size = sizeNumber;\n        }\n\n        return this.$sessionStorage.searchParameters.size;\n    }\n\n    updateSearchParam(searchParam) {\n        this.$sessionStorage.searchParameters.term = searchParam.term;\n        this.$sessionStorage.searchParameters.tags = searchParam.tags;\n        this.$sessionStorage.searchParameters.direction =  searchParam.direction;\n        this.$sessionStorage.searchParameters.properties =  searchParam.properties;\n    }\n}\n\nclass ItemSearchCtrl {\n\n    constructor($scope, SearchItemCache, $location, itemService, tagService, DonwloadManager, playlistService, items) {\n        /* DI */\n        this.$location = $location;\n        this.itemService = itemService;\n        this.tagService = tagService;\n        this.DownloadManager = DonwloadManager;\n        this.playlistService = playlistService;\n        this.SearchItemCache = SearchItemCache;\n\n        /* Constructor Init */\n        this.totalItems = Number.MAX_VALUE;\n        this.maxSize = 10;\n        this.currentPage = this.SearchItemCache.page()+1;\n        this.searchParameters = this.SearchItemCache.getParameters();\n\n        //** WebSocket Subscription **//\n        this.DownloadManager\n            .ws\n            .subscribe(\"/topic/download\", (message) => this.updateItemFromWS(message), $scope);\n\n        $scope.$on('$routeUpdate', () => {\n            if (this.currentPage !== this.$location.search().page) {\n                this.currentPage = this.$location.search().page || 1;\n                this.changePage();\n            }\n        });\n\n        /*this.changePage();*/\n        this.attachResponse(items);\n    }\n\n    updateItemFromWS(wsMessage) {\n        let item = JSON.parse(wsMessage.body);\n\n        var elemToUpdate = _.find(this.items, { 'id': item.id });\n        if (elemToUpdate)\n            _.assign(elemToUpdate, item);\n    }\n\n    changePage() {\n        this.SearchItemCache.page(this.calculatePage());\n        return this.itemService\n            .search(this.SearchItemCache.getParameters())\n            .then((itemsResponse) => this.attachResponse(itemsResponse));\n    }\n\n    attachResponse(itemsResponse) {\n        this.items = itemsResponse.content;\n        this.totalPages = itemsResponse.totalPages;\n        this.totalItems = itemsResponse.totalElements;\n        this.currentPage = this.SearchItemCache.page(itemsResponse.number)+1;\n        this.$location.search(\"page\", this.currentPage);\n    }\n\n    swipePage(val) {\n        this.currentPage = this.SearchItemCache.page() + val + 1;\n        return this.changePage();\n    }\n\n    //** Item Operation **//\n    remove(item) {\n        return item.remove()\n            .then(() => this.playlistService.remove(item))\n            .then(() => this.changePage());\n    }\n\n    reset(item) {\n        return item.reset()\n            .then((itemReseted) => {\n                var itemInList = _.find(this.items, { 'id': itemReseted.id });\n                _.assign(itemInList, itemReseted);\n                return itemInList;\n            })\n            .then((itemInList) => this.playlistService.remove(itemInList));\n    }\n\n    stopDownload(item) {\n        this.DownloadManager.ws.stop(item);\n    }\n\n    toggleDownload(item){\n        return this.DownloadManager.ws.toggle(item);\n    }\n\n    loadTags(query){\n        return this.tagService.search(query);\n    }\n\n    //** Playlist Manager **//\n    addOrRemove(item) {\n        return this.playlistService.addOrRemove(item);\n    }\n\n    isInPlaylist(item) {\n        return this.playlistService.contains(item);\n    }\n\n    calculatePage() {\n        if (this.currentPage <= 1) {\n            return 0;\n        } else if (this.currentPage > Math.ceil(this.totalItems / this.SearchItemCache.size())) {\n            return Math.ceil(this.totalItems / this.SearchItemCache.size()) - 1;\n        } else {\n            return this.currentPage - 1;\n        }\n    }\n\n    resetSearch() {\n        this.currentPage = 1;\n        this.SearchItemCache.updateSearchParam(this.searchParameters);\n        return this.changePage();\n    }\n}\n\nangular.module('ps.search.item', [\n    'ps.dataService.donwloadManager',\n    'ps.dataService.item',\n    'ps.dataService.tag',\n    'ps.player',\n    'ps.config.route',\n    'ngTagsInput',\n    'ngStorage'\n])\n    .config(($routeProvider, commonKey) => {\n        $routeProvider.\n            when('/items', {\n                templateUrl: 'html/items-search.html',\n                controller: 'ItemsSearchCtrl',\n                controllerAs: 'isc',\n                reloadOnSearch: false,\n                hotkeys: [\n                    ['right', 'Next page', 'isc.swipePage(1)'],\n                    ['left', 'Previous page', 'isc.swipePage(-1)']\n                ].concat(commonKey),\n                resolve : { items : (itemService, SearchItemCache) => itemService.search(SearchItemCache.getParameters()) }\n            });\n    })\n    .constant('DefaultItemSearchParameters', {\n        page : 0,\n        size : 12,\n        term : undefined,\n        tags : undefined,\n        direction : 'DESC',\n        properties : 'pubdate'\n    })\n    .controller('ItemsSearchCtrl', ItemSearchCtrl)\n    .service(\"SearchItemCache\", SearchItemCache);\nangular.module('ps.search', [\n    'ps.search.item'\n]);\n\n\nclass StatsController {\n\n    constructor(statService, stats) {\n        this.statService = statService;\n        this.month = 1;\n\n        this.chartSeries = [];\n        this.transform(stats);\n\n        this.chartConfig = {\n            options: {\n                chart: {\n                    type: 'spline'\n                },\n                plotOptions: {\n                    spline: {\n                        marker: {\n                            enabled: true\n                        }\n                    }\n                },\n                xAxis: {\n                    type: 'datetime',\n                    dateTimeLabelFormats: { // don't display the dummy year\n                        month: '%e. %b',\n                        year: '%b'\n                    },\n                    title: {\n                        text: 'Date'\n                    }\n                }\n            },\n            series: this.chartSeries,\n            title : {\n                text : ''\n            },\n            credits: {\n                enabled: false\n            },\n            loading: false\n        };\n    }\n\n    transform(stats) {\n        _.updateinplace(this.chartSeries, []);\n\n        angular.forEach(stats, (value) => {\n            let element = { name : value.type };\n            element.data = _(value.values)\n                .map(StatsController.dateMapper())\n                .sortBy(\"date\")\n                .map(StatsController.highChartsMapper())\n                .value();\n            this.chartSeries.push(element);\n        });\n    }\n\n    static dateMapper() {\n        return (value) => { return { date : Date.UTC(value.date[0], value.date[1]-1, value.date[2]), numberOfItems : value.numberOfItems }; };\n    }\n\n    static highChartsMapper() {\n        return (value) => [value.date, value.numberOfItems];\n    }\n\n    navigate(offset) {\n        this.month += offset;\n        this.generateChartData();\n    }\n\n    generateChartData() {\n        /*_.updateinplace(this.chartSeries, []);*/\n\n        return this.statService\n            .statsByType(this.month)\n            .then(statsByType => this.transform(statsByType));\n    }\n}\n\nangular.module('ps.stats', [\n    'ps.dataService.stat'\n])\n    .config(function($routeProvider, commonKey) {\n        $routeProvider.\n            when('/stats', {\n                templateUrl: 'html/stats.html',\n                controller: 'StatsController',\n                controllerAs: 'sc',\n                hotkeys: commonKey,\n                resolve : {\n                    stats : statService => statService.statsByType()\n                }\n            });\n    })\n    .controller('StatsController', StatsController);\n/**\n * Created by kevin on 02/11/14.\n */\n\nangular.module('ps.dataservice', [\n    'ps.dataService.donwloadManager',\n    'ps.dataService.item',\n    'ps.dataService.podcast',\n    'ps.dataService.tag',\n    'ps.dataService.type',\n    'ps.dataService.updateService'\n]);\n\nclass wsDownloadManager {\n\n    /*@ngNoInject*/\n    constructor(urlBase, ngstomp) {\n        this.WS_DOWNLOAD_BASE = urlBase;\n        this.ngstomp = ngstomp;\n    }\n\n    connect() { return this.ngstomp.connect();}\n    subscribe(url, callback, scope) {return this.ngstomp.subscribe(url, callback, scope);}\n    unsubscribe(url) { return this.ngstomp.unsubscribe(url); }\n    toggle(item) { return this.ngstomp.send(this.WS_DOWNLOAD_BASE + '/toogle', item); }\n    start(item) { return this.ngstomp.send(this.WS_DOWNLOAD_BASE + '/start', item); }\n    pause(item) { return this.ngstomp.send(this.WS_DOWNLOAD_BASE + '/pause', item); }\n    stop(item) { return this.ngstomp.send(this.WS_DOWNLOAD_BASE + '/stop', item); }\n}\n\nclass DownloadManager {\n\n    constructor(Restangular, ngstomp) {\n        this.Restangular = Restangular;\n        this.baseTask = this.Restangular.one(\"task\");\n        this.baseDownloadManager = this.baseTask.one('downloadManager');\n        this.WS_DOWNLOAD_BASE = '/app/download';\n\n        this.ws = new wsDownloadManager(this.WS_DOWNLOAD_BASE, ngstomp);\n    }\n\n    download(item) {\n        return this.Restangular.one(\"item\").customGET(item.id + \"/addtoqueue\");\n    }\n    stopDownload (item) {\n        return this.baseDownloadManager.customPOST(item.id, \"stopDownload\");\n    }\n    toggleDownload (item) {\n        return this.baseDownloadManager.customPOST(item.id, \"toogleDownload\");\n    }\n    stopAllDownload () {\n        return this.baseDownloadManager.customGET(\"stopAllDownload\");\n    }\n    pauseAllDownload () {\n        return this.baseDownloadManager.customGET(\"pauseAllDownload\");\n    }\n    restartAllCurrentDownload () {\n        return this.baseDownloadManager.customGET(\"restartAllCurrentDownload\");\n    }\n    removeFromQueue (item) {\n        return this.baseDownloadManager.customDELETE(\"queue/\" + item.id);\n    }\n    updateNumberOfSimDl (number) {\n        return this.baseDownloadManager.customPOST(number, \"limit\");\n    }\n    dontDonwload (item) {\n        return this.baseDownloadManager.customDELETE(\"queue/\" + item.id + \"/andstop\");\n    }\n    getDownloading () {\n        return this.baseTask.all(\"downloadManager/downloading\").getList();\n    }\n    getNumberOfSimDl () {\n        return this.baseDownloadManager.one(\"limit\").get();\n    }\n    moveInWaitingList  (item, position) {\n        this.baseDownloadManager.customPOST({id : item.id, position : position } , 'move');\n    }\n\n}\n\nangular.module('ps.dataService.donwloadManager', [ 'restangular', 'AngularStompDK']) .service('DonwloadManager', DownloadManager);\n/**\n * Created by kevin on 01/11/14.\n */\n\nclass itemService {\n    constructor(Restangular) {\n        this.Restangular = Restangular;\n        this.childRoute = \"items\";\n    }\n\n    search(searchParameters = { page : 0, size : 12} ) {\n        return this.Restangular.one(\"item/search\")\n            .post(null, searchParameters)\n            .then((responseFromServer) => {\n                responseFromServer.content = this.restangularizedItems(responseFromServer.content);\n                return responseFromServer;\n            });\n    }\n\n    findById(podcastId, itemId) {\n        return this.Restangular.one(\"podcast\", podcastId).one(this.childRoute, itemId).get();\n    }\n\n    getItemForPodcastWithPagination(podcast, pageParemeters) {\n        return podcast.one(\"items\").post(null, pageParemeters);\n    }\n\n    restangularizePodcastItem (podcast, items) {\n        return this.Restangular.restangularizeCollection(podcast, items, this.childRoute);\n    }\n\n    restangularizedItems(itemList) {\n        var restangularList = [];\n        \n        angular.forEach(itemList, (value) => {\n            restangularList.push(this.Restangular.restangularizeElement(this.Restangular.one('podcast', value.podcastId), value, this.childRoute));\n        });\n        return restangularList;\n    }\n\n    upload(podcast, file) {\n        var formData = new FormData();\n        formData.append('file', file);\n        return podcast.all(this.childRoute)\n            .withHttpConfig({transformRequest: angular.identity})\n            .customPOST(formData, 'upload', undefined, {'Content-Type': undefined});\n    }\n}\n\nangular.module('ps.dataService.item', ['restangular']).service('itemService', itemService);\n\n/**\n * Created by kevin on 02/11/14.\n */\n\nclass podcastService  {\n    \n    constructor(Restangular) {\n        this.Restangular = Restangular;\n        this.route = 'podcast';\n    }\n\n    findById(podcastId) {\n        return this.Restangular.one(this.route, podcastId).get();\n    }\n\n    findAll() {\n        return this.Restangular.all(this.route).getList();\n    }\n\n    save(podcast) {\n        return podcast.save();\n    }\n\n    getNewPodcast() {\n        return this.Restangular.one(this.route);\n    }\n\n    patch(item) {\n        return item.patch();\n    }\n\n    deletePodcast(item) {\n        return item.remove();\n    }\n\n    findInfo(url) {\n        return this.Restangular.one(this.route).findInfo(url);\n    }\n\n    statsByPubdate(id, numberOfMonth = 6) {\n        return this.Restangular.one(this.route, id).one('stats').all('byPubdate').post(numberOfMonth);\n    }\n\n    statsByByDownloaddate(id, numberOfMonth = 6) {\n        return this.Restangular.one(this.route, id).one('stats').all('byDownloaddate').post(numberOfMonth);\n    }\n    \n}\n\nangular.module('ps.dataService.podcast', ['restangular'])\n    .config((RestangularProvider) => {\n            RestangularProvider.addElementTransformer('podcast', false, (podcast) => {\n                podcast.addRestangularMethod('findInfo', 'post', 'fetch', undefined, {'Content-Type': 'text/plain'});\n                return podcast;\n            });\n        })\n    .service('podcastService', podcastService);\n/**\n * Created by kevin on 01/11/14.\n */\n\nclass statService {\n\n    constructor(Restangular) {\n        this.Restangular = Restangular;\n        this.base = this.Restangular.one('stats');\n    }\n\n    statsByType(numberOfMonth = 1) {\n        return this.base.all('byType').post(numberOfMonth);\n    }\n}\n\nangular.module('ps.dataService.stat', ['restangular']).service('statService', statService);\n\n/**\n * Created by kevin on 01/11/14.\n */\n\nclass tagService {\n    \n    constructor(Restangular) {\n        this.baseAll = Restangular.all('tag'); \n    }\n\n    getAll() {\n        return this.baseAll.get();\n    }\n\n    search(query) {\n        return this.baseAll.post(null, {name : query});\n    }\n    \n}\n\nangular.module('ps.dataService.tag', ['restangular'])\n    .service('tagService', tagService);\n/**\n * Created by kevin on 01/11/14.\n */\n\nclass typeService {\n\n    constructor(Restangular) {\n        this.baseAll = Restangular.all('types');\n    }\n\n    findAll() {\n        return this.baseAll.getList();\n    }\n}\n\nangular.module('ps.dataService.type', ['restangular'])\n    .service('typeService', typeService);\n\nclass UpdateService {\n    constructor(Restangular) {\n        this.Restangular = Restangular;\n    }\n\n    forceUpdatePodcast(idPodcast) {\n        return this.Restangular.one(\"task\").customPOST(idPodcast, \"updateManager/updatePodcast/force\");\n    }\n} \n\nangular.module('ps.dataService.updateService', ['restangular']).service('UpdateService', UpdateService);\n\nclass podcastEditionDirective {\n    constructor() {\n        this.restrict = 'E';\n        this.templateUrl = 'html/podcast-details-edition.html';\n        this.scope = { podcast : '=' };\n        this.controller = 'podcastEditionCtrl';\n        this.controllerAs = 'pec';\n        this.bindToController = true;\n    }\n}\n\nclass podcastEditionCtrl {\n    constructor($scope, $location, tagService, podcastService) {\n        this.$scope = $scope;\n        this.$location = $location;\n        this.tagService = tagService;\n        this.podcastService = podcastService;\n    }\n\n    loadTags(query) {\n        return this.tagService.search(query);\n    }\n\n    save() {\n        var podcastToUpdate = _.cloneDeep(this.podcast);\n        podcastToUpdate.items = null;\n\n        return this.podcastService\n            .patch(podcastToUpdate)\n            .then((patchedPodcast) => _.assign(this.podcast, patchedPodcast))\n            .then(() => this.$scope.$emit('podcastEdition:save'));\n    }\n\n    deletePodcast() {\n        return this.podcastService\n            .deletePodcast(this.podcast)\n            .then(() => this.$location.path('/podcasts'));\n    }\n}\n\nangular.module('ps.podcast.details.edition', [\n    'ps.dataService.podcast',\n    'ps.dataService.tag',\n    'ngTagsInput'\n])\n    .directive('podcastEdition', () => new podcastEditionDirective())\n    .controller('podcastEditionCtrl', podcastEditionCtrl);\n\nclass podcastItemsListDirective{\n    constructor() {\n        this.restrict= 'E';\n        this.templateUrl = 'html/podcast-details-episodes.html';\n        this.scope = { podcast : '=' };\n        this.controller = 'podcastItemsListCtrl';\n        this.controllerAs = 'pic';\n        this.bindToController = true;\n    }\n}\n\nclass podcastItemsListCtrl {\n\n    constructor($scope, DonwloadManager, PodcastItemPerPage, itemService, playlistService ) {\n        /* DI */\n        this.$scope = $scope;\n        this.DownloadManager = DonwloadManager;\n        this.itemService = itemService;\n        this.playlistService = playlistService;\n\n        this.currentPage = 1;\n        this.itemPerPage = PodcastItemPerPage;\n        this.loadPage();\n\n        this.$scope.$on(\"podcastItems:refresh\", () => {\n            this.currentPage = 1;\n            this.loadPage();\n        });\n\n        this.DownloadManager\n            .ws\n            .subscribe( \"/topic/podcast/\".concat(this.podcast.id),\n                        (message) => this.onMessageFromWS(message),\n                        $scope);\n    }\n\n    onMessageFromWS(message) {\n        var item = JSON.parse(message.body);\n        var elemToUpdate = _.find(this.podcast.items, { 'id': item.id });\n        _.assign(elemToUpdate, item);\n    }\n\n    loadPage() {\n        this.currentPage = (this.currentPage < 1) ? 1 : (this.currentPage > Math.ceil(this.totalItems / this.itemPerPage)) ? Math.ceil(this.totalItems / this.itemPerPage) : this.currentPage;\n        return this.itemService\n            .getItemForPodcastWithPagination(this.podcast, {size: this.itemPerPage, page : this.currentPage - 1, direction : 'DESC', properties : 'pubdate'})\n            .then((itemsResponse) => {\n                this.podcast.items = this.itemService.restangularizePodcastItem(this.podcast, itemsResponse.content);\n                this.podcast.totalItems = itemsResponse.totalElements;\n            });\n    }\n\n    remove(item) {\n        item.remove()\n            .then(() => this.podcast.items = _.reject(this.podcast.items, (elem) => {return (elem.id === item.id); }))\n            .then(() => this.playlistService.remove(item))\n            .then(() => this.loadPage());\n    }\n\n\n    reset(item) {\n        return item.reset()\n            .then((itemReseted) => {\n                var itemInList = _.find(this.podcast.items, { 'id': itemReseted.id });\n                _.assign(itemInList, itemReseted);\n                return itemInList;\n            })\n            .then((itemToRemove) => this.playlistService.remove(itemToRemove));\n    }\n\n    addOrRemoveInPlaylist(item) {\n        this.playlistService.addOrRemove(item);\n    }\n\n    isInPlaylist(item) {\n        return this.playlistService.contains(item);\n    }\n\n    swipePage(val) {\n        this.currentPage += val;\n        this.loadPage();\n    }\n\n    stopDownload(item) {\n        this.DownloadManager.ws.stop(item);\n    }\n    toggleDownload(item) {\n        this.DownloadManager.ws.toggle(item);\n    }\n}\nangular.module('ps.podcast.details.episodes', [\n    'ps.player'\n])\n    .directive('podcastItemsList', () => new podcastItemsListDirective())\n    .constant('PodcastItemPerPage', 10)\n    .controller('podcastItemsListCtrl', podcastItemsListCtrl);\n\nclass PodcastDetailCtrl {\n\n    constructor($scope, podcast, UpdateService){\n        this.$scope = $scope;\n        this.UpdateService = UpdateService;\n        this.podcast = podcast;\n\n        this.podcastTabs= [\n            { heading : 'Episodes', active : true},\n            { heading : 'Edition', active : false},\n            { heading : 'Upload', disabled : this.podcast.type !== 'send'},\n            { heading : 'Stats', active : false}\n        ];\n        this.$scope.$on(\"podcastEdition:save\", () => this.refreshItems());\n        this.$scope.$on(\"podcastEdition:upload\", () => this.refreshItems());\n    }\n\n    refreshItems() {\n        this.$scope.$broadcast('podcastItems:refresh');\n    }\n\n    refresh() {\n        this.UpdateService\n            .forceUpdatePodcast(this.podcast.id)\n            .then(() => this.refreshItems());\n    }\n\n    tabsActive(num) {\n        this.podcastTabs[num].active = true;\n    }\n\n}\n\nangular.module('ps.podcast.details', [\n    'ps.config.route',\n    'ps.podcast.details',\n    'ps.podcast.details.episodes',\n    'ps.podcast.details.edition',\n    'ps.podcast.details.upload',\n    'ps.podcast.details.stats',\n    'ps.dataService.updateService'\n]).config(($routeProvider, commonKey) =>\n    $routeProvider.\n        when('/podcasts/:podcastId', {\n            templateUrl: 'html/podcast-detail.html',\n            controller: 'PodcastDetailCtrl',\n            controllerAs: 'pdc',\n            /*hotkeys: [\n                ['r', 'Refresh', 'pdc.refreshItems()'],\n                ['f', 'Force Refresh', 'pdc.refresh()'],\n                ['l', 'List of Items', 'pdc.tabsActive(0)'],\n                ['m', 'Modification of Podcast', 'pdc.tabsActive(1)']\n            ].concat(commonKey),*/\n            hotkeys : commonKey,\n            resolve : { podcast : (podcastService, $route) => podcastService.findById($route.current.params.podcastId) }\n        })\n)\n    .controller('PodcastDetailCtrl', PodcastDetailCtrl);\nclass podcastStatsDirective {\n    constructor() {\n        this.restrict = 'E';\n        this.scope = { podcast : '='};\n        this.templateUrl = 'html/podcast-details-stats.html';\n        this.controller = 'PodcastDetailsStatsCtrl';\n        this.controllerAs = 'pdsc';\n        this.bindToController = true;\n    }\n}\n\nclass PodcastDetailsStatsCtrl {\n\n    constructor($scope, $q, podcastService) {\n        this.$q = $q;\n        this.podcastService = podcastService;\n        this.month = 6;\n\n        this.chartSeries = [];\n        this.generateChartData();\n        this.chartConfig = {\n            options: {\n                chart: {\n                    type: 'spline'\n                },\n                plotOptions: {\n                    spline: {\n                        marker: {\n                            enabled: true\n                        }\n                    }\n                },\n                xAxis: {\n                    type: 'datetime',\n                    dateTimeLabelFormats: { // don't display the dummy year\n                        month: '%e. %b',\n                        year: '%b'\n                    },\n                    title: {\n                        text: 'Date'\n                    }\n                }\n            },\n            series: this.chartSeries,\n            title : {\n                text : ''\n            },\n            credits: {\n                enabled: false\n            },\n            loading: false\n        };\n\n        $scope.$on(\"podcastItems:refresh\", () => this.generateChartData());\n    }\n\n    navigate(offset) {\n        this.month += offset;\n        return this.generateChartData();\n    }\n\n    generateChartData() {\n        PodcastDetailsStatsCtrl.resetChart(this.chartSeries);\n\n        return this.$q.all([\n            this.podcastService.statsByByDownloaddate(this.podcast.id, this.month),\n            this.podcastService.statsByPubdate(this.podcast.id, this.month)\n        ]).then((arrayResult) => {\n            let downloadData = _(arrayResult[0])\n                    .map(PodcastDetailsStatsCtrl.dateMapper())\n                    .sortBy(\"date\")\n                    .map(PodcastDetailsStatsCtrl.highChartsMapper())\n                    .value(),\n                publicationData = _(arrayResult[1])\n                    .map(PodcastDetailsStatsCtrl.dateMapper())\n                    .sortBy(\"date\")\n                    .map(PodcastDetailsStatsCtrl.highChartsMapper())\n                    .value();\n\n            this.chartSeries.push({\"name\": \"Download Date\", \"data\": downloadData});\n            this.chartSeries.push({\"name\": \"Publication Date\", \"data\": publicationData});\n            return this.chartSeries;\n        });\n    }\n\n    static resetChart(chartSeries) {\n        _.updateinplace(chartSeries, []);\n    }\n\n    static dateMapper() {\n        return (value) => { return { date : Date.UTC(value.date[0], value.date[1]-1, value.date[2]), numberOfItems : value.numberOfItems }; };\n    }\n\n    static highChartsMapper() {\n        return (value) => [value.date, value.numberOfItems];\n    }\n}\n\n\nangular.module('ps.podcast.details.stats', [ 'highcharts-ng' ])\n    .directive('podcastStats', () => new podcastStatsDirective())\n    .controller('PodcastDetailsStatsCtrl', PodcastDetailsStatsCtrl);\n\nclass podcastUploadDirective {\n\n    constructor() {\n        this.restrcit = 'E';\n        this.templateUrl = 'html/podcast-details-upload.html';\n        this.scope = {\n            podcast : '='\n        };\n        this.controller = 'podcastUploadCtrl';\n        this.controllerAs = 'puc';\n        this.bindToController = true;\n    }\n}\n\nclass podcastUploadCtrl{\n\n    constructor($scope, itemService, $notification) {\n        this.$scope = $scope;\n        this.itemService = itemService;\n        this.$notification = $notification;\n    }\n\n    onFileSelect($files) {\n        angular.forEach($files, (file) => {\n            this.itemService.upload(this.podcast, file)\n                .then((item) => {\n                    this.$scope.$emit(\"podcastEdition:upload\");\n                    try {\n                        this.$notification('Upload effectué', {\n                            body: item.title,\n                            icon: item.cover.url,\n                            delay: 5000\n                        });\n                    } catch (e) {}\n                });\n        });\n    }\n}\n\n\nangular.module('ps.podcast.details.upload', [\n    'angularFileUpload',\n    'ps.dataService.item',\n    'notification'\n])\n    .directive('podcastUpload', () => new podcastUploadDirective())\n    .controller('podcastUploadCtrl', podcastUploadCtrl);\n"],"sourceRoot":"/source/"}